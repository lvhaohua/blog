(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{463:function(t,s,a){"use strict";a.r(s);var e=a(15),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("介绍了 DNS 解析、TCP 链接过程、HTTP 协议的发展历程")]),t._v(" "),a("h2",{attrs:{id:"一、网络通信模型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、网络通信模型"}},[t._v("#")]),t._v(" 一、网络通信模型")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/image-20200508001100626.png"}}),t._v(" "),a("h2",{attrs:{id:"二、dns-解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、dns-解析"}},[t._v("#")]),t._v(" 二、DNS 解析")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("先从本地 host 文件获取 ip 地址")])]),t._v(" "),a("li",[a("p",[t._v("从本地 dns 服务器获取 ip 地址")])]),t._v(" "),a("li",[a("p",[t._v("一层一层向 dns 根服务器查询 ip 地址")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/image-20200508190731958.png"}})]),t._v(" "),a("li",[a("p",[t._v("优化：")]),t._v(" "),a("p",[t._v("原因：查找 DNS 是需要花费时间的，需要 20 毫秒左右的时间，会阻塞浏览器接下来要进行的一些列操作。")]),t._v(" "),a("p",[t._v("方案：")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("减少 DNS 查找次数，最理想的方法就是将所有的内容资源都放在同一个域(Domain)下面，这样访问整个网站就只需要进行一次 DNS 查找，这样可以提高性能。")])]),t._v(" "),a("li",[a("p",[t._v("由于这些资源都在同一个域，而 HTTP/1.1 中推荐客户端针对每个域只有一定数量的并行度（它的建议是 2），那么就会出现下载资源时的排队现象，这样就会降低性能。可升级 HTTP/2.0。")])]),t._v(" "),a("li",[a("p",[t._v("link prefetching：https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Link_prefetching_FAQ")])])])])]),t._v(" "),a("h2",{attrs:{id:"三、建立和释放-tcp-链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、建立和释放-tcp-链接"}},[t._v("#")]),t._v(" 三、建立和释放 TCP 链接")]),t._v(" "),a("blockquote",[a("p",[t._v("参考文档：https://blog.csdn.net/qzcsu/article/details/72861891")])]),t._v(" "),a("h3",{attrs:{id:"_3-1-三次握手"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-三次握手"}},[t._v("#")]),t._v(" 3.1 三次握手")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("客户端发送 seq = x 和 SYN = 1 标识至服务端表示期望建立链接")])]),t._v(" "),a("li",[a("p",[t._v("服务端返回 seq = y，ack = x + 1 和 SYN = 1，ACK = 1 和至客户端")])]),t._v(" "),a("li",[a("p",[t._v("客户端发送 seq = x + 1,ack = y + 1 和 ACK = 1 至服务端确认")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNjA3MjA1NzA5MzY3?x-oss-process=image/format,png"}}),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNjA1MTEwNDA1NjY2?x-oss-process=image/format,png"}})])]),t._v(" "),a("h3",{attrs:{id:"_3-2-四次挥手"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-四次挥手"}},[t._v("#")]),t._v(" 3.2 四次挥手")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("客户端在请求结束后，主动向服务端发起 seq = u 和 FIN = 1 标志表示要释放链接")])]),t._v(" "),a("li",[a("p",[t._v("服务端收到释放报文后，向客户端发送 seq = v，ack = u + 1 和 ACK = 1 并进入 CLOSE_WAIT 状态，还有可能发送数据")])]),t._v(" "),a("li",[a("p",[t._v("服务器在发送完所有数据后，主动向客户端发送 seq = w，ack = u + 1 和 FIN = 1 标志报文进行最后的确认，进入 LAST_ACK 状态")])]),t._v(" "),a("li",[a("p",[t._v("客户端收到服务端释放报文后，向服务端发送 seq = u + 1，ack = w + 1 和 ACK = 1 报文确认释放")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNjA3MjA1NzU2MjU1?x-oss-process=image/format,png",alt:""}})]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNjA2MDg0ODUxMjcy?x-oss-process=image/format,png"}})])]),t._v(" "),a("h2",{attrs:{id:"四、http-报文"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、http-报文"}},[t._v("#")]),t._v(" 四、HTTP 报文")]),t._v(" "),a("h3",{attrs:{id:"_4-1-请求报文"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-请求报文"}},[t._v("#")]),t._v(" 4.1 请求报文")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/20200708012532.png",alt:"请求报文结构"}})]),t._v(" "),a("h3",{attrs:{id:"_4-2-响应报文"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-响应报文"}},[t._v("#")]),t._v(" 4.2 响应报文")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/20200708012640.png",alt:"响应报文结构"}})]),t._v(" "),a("h3",{attrs:{id:"_4-3-通用首部-general-header-fields"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-通用首部-general-header-fields"}},[t._v("#")]),t._v(" 4.3 通用首部（General Header Fields）")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("首部字段名")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("Cache-Control")]),t._v(" *")]),t._v(" "),a("td",[t._v("控制缓存（缓存服务器）的行为"),a("br"),t._v("1.no-cache: 不缓存过期的资源,先确定资源有效性"),a("br"),t._v("2.no-store：不缓存资源"),a("br"),t._v("3.max-age：有效期内不再校验有效性，返回缓存资源，忽略 Expires"),a("br"),t._v("4.s-maxage：仅适用于供多位用户使用的公共缓存服务器，同 max-age，忽略 Expires 和 max-age")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("Connection")]),t._v(" *")]),t._v(" "),a("td",[t._v("链接方式 "),a("br"),t._v("1.keep-alive: 长连接"),a("br"),t._v("2.close：短连接")])]),t._v(" "),a("tr",[a("td",[t._v("Date *")]),t._v(" "),a("td",[t._v("创建报文的日期时间")])]),t._v(" "),a("tr",[a("td",[t._v("Pragma")]),t._v(" "),a("td",[t._v("同 Cache-Control")])]),t._v(" "),a("tr",[a("td",[t._v("Trailer")]),t._v(" "),a("td",[t._v("报文末端的首部一览")])]),t._v(" "),a("tr",[a("td",[t._v("Transfer-Encoding")]),t._v(" "),a("td",[t._v("传输报文主体时采用的编码方式"),a("br"),t._v("1.chunked：分块传输")])]),t._v(" "),a("tr",[a("td",[t._v("Upgrade")]),t._v(" "),a("td",[t._v("升级为其他协议")])]),t._v(" "),a("tr",[a("td",[t._v("Via")]),t._v(" "),a("td",[t._v("追踪传输路径，代理服务器的相关信息，同 TRACE 一起使用")])]),t._v(" "),a("tr",[a("td",[t._v("Warning")]),t._v(" "),a("td",[t._v("错误通知，通常会告知用户一些与缓存相关的问题的警告")])])])]),t._v(" "),a("h3",{attrs:{id:"_4-4-请求首部-request-header-fields"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-请求首部-request-header-fields"}},[t._v("#")]),t._v(" 4.4 请求首部（Request Header Fields）")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("首部字段名")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("Accept")]),t._v(" *")]),t._v(" "),a("td",[t._v("用户代理（浏览器）可处理的媒体类型，如：text/html,application/xml,image/jpeg")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("Accept-Charset")]),t._v(" *")]),t._v(" "),a("td",[t._v("优先的字符集")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("Accept-Encoding")]),t._v(" *")]),t._v(" "),a("td",[t._v("优先支持的内容编码压缩方式：gzip，deflate")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("Accept-Language")]),t._v(" *")]),t._v(" "),a("td",[t._v("优先的语言（自然语言）q 指定权重：zh-cn,zh;q=0.7,en-us,en;q=0.3")])]),t._v(" "),a("tr",[a("td",[t._v("Authorization")]),t._v(" "),a("td",[t._v("Web 认证信息，401 时带上 Authorization")])]),t._v(" "),a("tr",[a("td",[t._v("Expect")]),t._v(" "),a("td",[t._v("期待服务器的特定行为")])]),t._v(" "),a("tr",[a("td",[t._v("From")]),t._v(" "),a("td",[t._v("用户的电子邮箱地址")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("Host")]),t._v(" *")]),t._v(" "),a("td",[t._v("请求资源所在服务器，"),a("strong",[t._v("唯一必须被包含在请求首部的字段")])])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("If-Match")]),t._v(" *")]),t._v(" "),a("td",[t._v("比较实体标记（ETag），如果服务端有对应的 ETag 则处理请求")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("If-Modified-Since")]),t._v(" *")]),t._v(" "),a("td",[t._v("从某个时期开始，如果有更新，服务端就接受请求，否则 304")])]),t._v(" "),a("tr",[a("td",[t._v("If-None-Match *")]),t._v(" "),a("td",[t._v("比较实体标记（与 If-Match 相反），如果服务端没有对应的 ETag 则处理请求")])]),t._v(" "),a("tr",[a("td",[t._v("If-Range *")]),t._v(" "),a("td",[t._v("资源未更新时发送实体 Byte 的范围请求")])]),t._v(" "),a("tr",[a("td",[t._v("If-Unmodified-Since *")]),t._v(" "),a("td",[t._v("比较资源的更新时间（与 If-Modified-Since 相反）")])]),t._v(" "),a("tr",[a("td",[t._v("Max-Forwards")]),t._v(" "),a("td",[t._v("最大传输逐跳数")])]),t._v(" "),a("tr",[a("td",[t._v("Proxy-Authorization")]),t._v(" "),a("td",[t._v("代理服务器要求客户端的认证信息")])]),t._v(" "),a("tr",[a("td",[t._v("Range *")]),t._v(" "),a("td",[t._v("实体的字节范围请求")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("Referer")]),t._v(" *")]),t._v(" "),a("td",[t._v("对请求中 URI 的原始获取方")])]),t._v(" "),a("tr",[a("td",[t._v("TE")]),t._v(" "),a("td",[t._v("传输编码的优先级")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("User-Agent")]),t._v(" *")]),t._v(" "),a("td",[t._v("HTTP 客户端程序的信息")])])])]),t._v(" "),a("h3",{attrs:{id:"_4-5-响应首部-response-header-fields"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-响应首部-response-header-fields"}},[t._v("#")]),t._v(" 4.5 响应首部（Response Header Fields）")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("首部字段名")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Accept-Ranges *")]),t._v(" "),a("td",[t._v("是否接受字节范围请求")])]),t._v(" "),a("tr",[a("td",[t._v("Age")]),t._v(" "),a("td",[t._v("推算资源创建经过时间")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("ETag")]),t._v(" *")]),t._v(" "),a("td",[t._v("服务器为每一个资源分配的唯一标识")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("Location")]),t._v(" *")]),t._v(" "),a("td",[t._v("令客户端重定向至指定 URI，重定向")])]),t._v(" "),a("tr",[a("td",[t._v("Proxy-Authenticate")]),t._v(" "),a("td",[t._v("代理服务器对客户端的认证信息")])]),t._v(" "),a("tr",[a("td",[t._v("Retry-After *")]),t._v(" "),a("td",[t._v("对再次发起请求的时机要求")])]),t._v(" "),a("tr",[a("td",[t._v("Server *")]),t._v(" "),a("td",[t._v("HTTP 服务器的信息：nginx/1.16.1")])]),t._v(" "),a("tr",[a("td",[t._v("Vary")]),t._v(" "),a("td",[t._v("对持相同自然语言的请求返回缓存")])]),t._v(" "),a("tr",[a("td",[t._v("WWW-Authenticate")]),t._v(" "),a("td",[t._v("服务器对客户端的认证信息")])])])]),t._v(" "),a("h3",{attrs:{id:"_4-6-实体首部-entity-header-fields"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-6-实体首部-entity-header-fields"}},[t._v("#")]),t._v(" 4.6 实体首部（Entity Header Fields）")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("首部字段名")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Allow *")]),t._v(" "),a("td",[t._v("资源可支持的 HTTP 方法：GET, HEAD")])]),t._v(" "),a("tr",[a("td",[t._v("Content-Encoding *")]),t._v(" "),a("td",[t._v("实体主体适用的编码方式")])]),t._v(" "),a("tr",[a("td",[t._v("Content-Language *")]),t._v(" "),a("td",[t._v("实体主体的自然语言")])]),t._v(" "),a("tr",[a("td",[t._v("Content-Length *")]),t._v(" "),a("td",[t._v("实体主体的大小（单位：字节）")])]),t._v(" "),a("tr",[a("td",[t._v("Content-Location *")]),t._v(" "),a("td",[t._v("替代对应资源的 URI")])]),t._v(" "),a("tr",[a("td",[t._v("Content-MD5")]),t._v(" "),a("td",[t._v("实体主体的报文摘要")])]),t._v(" "),a("tr",[a("td",[t._v("Content-Range *")]),t._v(" "),a("td",[t._v("实体主体的位置范围")])]),t._v(" "),a("tr",[a("td",[t._v("Content-Type *")]),t._v(" "),a("td",[t._v("实体主体的媒体类型")])]),t._v(" "),a("tr",[a("td",[t._v("Expires *")]),t._v(" "),a("td",[t._v("实体主体过期的日期时间")])]),t._v(" "),a("tr",[a("td",[t._v("Last-Modified *")]),t._v(" "),a("td",[t._v("资源的最后修改日期时间")])])])]),t._v(" "),a("h3",{attrs:{id:"_4-7-其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-7-其他"}},[t._v("#")]),t._v(" 4.7 其他")]),t._v(" "),a("p",[t._v("Cookie、Set-Cookie")]),t._v(" "),a("h2",{attrs:{id:"五、http-方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、http-方法"}},[t._v("#")]),t._v(" 五、HTTP 方法")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("方法")]),t._v(" "),a("th",[t._v("释义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("GET")]),t._v(" "),a("td",[t._v("请求资源就返回资源，请求 CGI 则返回接口处理结果")])]),t._v(" "),a("tr",[a("td",[t._v("HEAD")]),t._v(" "),a("td",[t._v("同 GET，但是只获得报文首部，不返回报文主体部分。用于确认 URI 的有效性及资源更新的日期时间等")])]),t._v(" "),a("tr",[a("td",[t._v("POST")]),t._v(" "),a("td",[t._v("向服务器传输实体主体")])]),t._v(" "),a("tr",[a("td",[t._v("PUT")]),t._v(" "),a("td",[t._v("向服务器写入文档内容，由服务器返回文档的地址，若已存在该文档，内容会覆盖（PUT 方法自身不带验证机制，存在安全性问题，一般通过登录来解决）")])]),t._v(" "),a("tr",[a("td",[t._v("DELETE")]),t._v(" "),a("td",[t._v("删除 URL 指定的资源，因为服务器有撤销该请求的权限，所以不一定会删除")])]),t._v(" "),a("tr",[a("td",[t._v("OPTIONS")]),t._v(" "),a("td",[t._v("询问针对请求 URI，服务器所支持的方法，返回 Allow：GET,POST,HEAD,OPTIONS")])]),t._v(" "),a("tr",[a("td",[t._v("TRACE")]),t._v(" "),a("td",[t._v("追踪整个请求的过程，可能引发 XST（Cross-Site Tracing，跨站追踪）攻击")])]),t._v(" "),a("tr",[a("td",[t._v("CONNECT")]),t._v(" "),a("td",[t._v("要求用隧道协议连接代理，使用 SSL（Secure Sockets Layer，安全套接层）和 TLS（Transport Layer Security，传输层安全）协议把通信内容加密后经网络隧道传输")])])])]),t._v(" "),a("p",[t._v("``")]),t._v(" "),a("h2",{attrs:{id:"六、状态码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#六、状态码"}},[t._v("#")]),t._v(" 六、状态码")]),t._v(" "),a("h3",{attrs:{id:"_2xx-成功"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2xx-成功"}},[t._v("#")]),t._v(" 2xx 成功")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("状态码")]),t._v(" "),a("th",[t._v("英文名称")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("200")]),t._v(" "),a("td",[t._v("OK")]),t._v(" "),a("td",[t._v("请求处理成功")])]),t._v(" "),a("tr",[a("td",[t._v("202")]),t._v(" "),a("td",[t._v("Accepted")]),t._v(" "),a("td",[t._v("已接受请求，但不执行任何动作")])]),t._v(" "),a("tr",[a("td",[t._v("204")]),t._v(" "),a("td",[t._v("No Content")]),t._v(" "),a("td",[t._v("请求处理成功，但不返回内容")])]),t._v(" "),a("tr",[a("td",[t._v("206")]),t._v(" "),a("td",[t._v("Partial Content")]),t._v(" "),a("td",[t._v("成功执行了一个部分资源的 GET 请求，对应 range 请求")])])])]),t._v(" "),a("h3",{attrs:{id:"_3xx-重定向"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3xx-重定向"}},[t._v("#")]),t._v(" 3xx 重定向")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("状态码")]),t._v(" "),a("th",[t._v("英文名称")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("301")]),t._v(" "),a("td",[t._v("Moved Permanently")]),t._v(" "),a("td",[t._v("资源 URI 永久修改，通过 Location 访问新 URI，规定不能修改 HTTP 方法，但实际会将 POST 变为 GET")])]),t._v(" "),a("tr",[a("td",[t._v("302")]),t._v(" "),a("td",[t._v("Found")]),t._v(" "),a("td",[t._v("资源 URI 临时修改，将来的请求仍用旧的 URI，规定是不能修改 HTTP 方法，但实际会将 POST 变为 GET")])]),t._v(" "),a("tr",[a("td",[t._v("303")]),t._v(" "),a("td",[t._v("See Other")]),t._v(" "),a("td",[t._v("使用 GET 请求重新请求 Location 中的新地址")])]),t._v(" "),a("tr",[a("td",[t._v("304")]),t._v(" "),a("td",[t._v("Not Modified")]),t._v(" "),a("td",[t._v("客户端发出带条件的请求，但资源未被修改（不属于重定向）")])]),t._v(" "),a("tr",[a("td",[t._v("305")]),t._v(" "),a("td",[t._v("Use Proxy")]),t._v(" "),a("td",[t._v("重新访问返回的 Location 中的代理地址")])]),t._v(" "),a("tr",[a("td",[t._v("307")]),t._v(" "),a("td",[t._v("Temporary Redirect")]),t._v(" "),a("td",[t._v("同 302 类似，但二次请求不会从 POST 变成 GET")])])])]),t._v(" "),a("h3",{attrs:{id:"_4xx-客户端错误"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4xx-客户端错误"}},[t._v("#")]),t._v(" 4xx 客户端错误")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("状态码")]),t._v(" "),a("th",[t._v("英文名称")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("400")]),t._v(" "),a("td",[t._v("Bad Request")]),t._v(" "),a("td",[t._v("客户端发出的请求报文有语法错误")])]),t._v(" "),a("tr",[a("td",[t._v("401")]),t._v(" "),a("td",[t._v("Unauthorized")]),t._v(" "),a("td",[t._v("首次请求，表示当前请求需要用户验证；二次请求，表示认证失败")])]),t._v(" "),a("tr",[a("td",[t._v("403")]),t._v(" "),a("td",[t._v("Forbidden")]),t._v(" "),a("td",[t._v("表示请求被服务器拒绝")])]),t._v(" "),a("tr",[a("td",[t._v("404")]),t._v(" "),a("td",[t._v("Not Found")]),t._v(" "),a("td",[t._v("请求失败，服务器没找到请求的资源，常被用于拒绝请求的场景")])]),t._v(" "),a("tr",[a("td",[t._v("405")]),t._v(" "),a("td",[t._v("Method Not Allowed")]),t._v(" "),a("td",[t._v("表示请求的方法不被支持用于请求相应的资源")])])])]),t._v(" "),a("h3",{attrs:{id:"_5xx-服务端错误"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5xx-服务端错误"}},[t._v("#")]),t._v(" 5xx 服务端错误")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("状态码")]),t._v(" "),a("th",[t._v("英文名称")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("500")]),t._v(" "),a("td",[t._v("Internal Server Error")]),t._v(" "),a("td",[t._v("服务器执行请求报错")])]),t._v(" "),a("tr",[a("td",[t._v("501")]),t._v(" "),a("td",[t._v("Not Implemented")]),t._v(" "),a("td",[t._v("服务器不支持该请求的方法")])]),t._v(" "),a("tr",[a("td",[t._v("503")]),t._v(" "),a("td",[t._v("Service Unavailable")]),t._v(" "),a("td",[t._v("服务器宕机或停机维护")])])])]),t._v(" "),a("h2",{attrs:{id:"七、无连接性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#七、无连接性"}},[t._v("#")]),t._v(" 七、无连接性")]),t._v(" "),a("blockquote",[a("p",[t._v("HTTP 协议的初始版本中，每进行一次 HTTP 通信就要断开一次 TCP 连接。")]),t._v(" "),a("p",[t._v("问题：随着请求资源的丰富，每次的请求都会造成无谓的 TCP 连接建立和断开，增加了通信量的开销。")]),t._v(" "),a("p",[t._v("引申出：**持久连接 HTTP keep-alive ** "),a("strong",[t._v("管线化（pipelining）")])])]),t._v(" "),a("h3",{attrs:{id:"_7-1-keep-alive"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-keep-alive"}},[t._v("#")]),t._v(" 7.1 keep-alive")]),t._v(" "),a("blockquote",[a("p",[t._v("减少了 TCP 连接的重复建立和断开所造成的额外开销，减轻了服务器端的负载。另外，减少开销的那部分时间，使 HTTP 请求和响应能够更早地结束，这样 Web 页面的显示速度也就相应提高了。")])]),t._v(" "),a("img",{staticStyle:{zoom:"33%"},attrs:{src:"https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/20200708010709.png",alt:"keep-alive"}}),t._v(" "),a("h3",{attrs:{id:"_7-2-管线化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-管线化"}},[t._v("#")]),t._v(" 7.2 管线化")]),t._v(" "),a("blockquote",[a("p",[t._v("不用等待上一个请求的响应亦可直接发送下一个请求")])]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/20200708010928.png"}}),t._v(" "),a("p",[t._v("​")]),t._v(" "),a("h2",{attrs:{id:"八、无状态性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#八、无状态性"}},[t._v("#")]),t._v(" 八、无状态性")]),t._v(" "),a("blockquote",[a("p",[t._v("为了更快地处理大量事务，确保协议的可伸缩性，HTTP 被设计为不保存状态，即无状态（stateless）协议。HTTP 协议自身不对请求和响应之间的通信状态进行保存。也就是说在 HTTP 这个级别，协议对于发送过的请求或响应都不做持久化处理。")]),t._v(" "),a("p",[t._v("问题：登录状态无法保持")]),t._v(" "),a("p",[t._v("引申出："),a("strong",[t._v("状态管理机制 cookie")])])]),t._v(" "),a("h3",{attrs:{id:"_8-1-cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-cookie"}},[t._v("#")]),t._v(" 8.1 Cookie")]),t._v(" "),a("blockquote",[a("p",[t._v("Cookie 技术通过在请求和响应报文中写入 Cookie 信息来控制客户端的状态")]),t._v(" "),a("ul",[a("li",[t._v("客户端通过"),a("strong",[t._v("set-cookie")]),t._v("首部字段获取身份状态标识，存在本地")]),t._v(" "),a("li",[t._v("客户端下次请求会自动带上存在本地的"),a("strong",[t._v("cookie")])])])]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/image-20200630145619704.png"}}),t._v(" "),a("ol",[a("li",[a("p",[t._v("请求报文（没有 Cookie 信息的状态）")]),t._v(" "),a("div",{staticClass:"language-http line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[a("span",{pre:!0,attrs:{class:"token request-line"}},[a("span",{pre:!0,attrs:{class:"token property"}},[t._v("GET")]),t._v(" /reader/ HTTP/1.1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Host:")]),t._v(" hackr.jp\n*首部字段内没有Cookie的相关信息\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("响应报文（服务器端生成 Cookie 信息）")]),t._v(" "),a("div",{staticClass:"language-http line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[a("span",{pre:!0,attrs:{class:"token response-status"}},[t._v("HTTP/1.1 "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("200 OK")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Date:")]),t._v(" Thu, 12 Jul 2012 07:12:20 GMT\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Server:")]),t._v(" Apache\n＜Set-Cookie: sid=1342077140226724; path=/; expires=Wed, 10-Oct-12 07:12:20 GMT＞\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Content-Type:")]),t._v(" text/plain; charset=UTF-8\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("请求报文（自动发送保存着的 Cookie 信息）")]),t._v(" "),a("div",{staticClass:"language-http line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[a("span",{pre:!0,attrs:{class:"token request-line"}},[a("span",{pre:!0,attrs:{class:"token property"}},[t._v("GET")]),t._v(" /image/ HTTP/1.1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Host:")]),t._v(" hackr.jp\n"),a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Cookie:")]),t._v(" sid=1342077140226724\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])])]),t._v(" "),a("h3",{attrs:{id:"_8-2-session"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-session"}},[t._v("#")]),t._v(" 8.2 Session")]),t._v(" "),a("ol",[a("li",[t._v("存储 SessionID 的方法：\n"),a("ol",[a("li",[t._v("cookie")]),t._v(" "),a("li",[t._v("URL 重写")]),t._v(" "),a("li",[t._v("隐藏表单")])])]),t._v(" "),a("li",[t._v("seesion 有效期\n"),a("ol",[a("li",[t._v("超时")]),t._v(" "),a("li",[t._v("注销")])])])]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/image-20200630145726148.png"}}),t._v(" "),a("h2",{attrs:{id:"九、缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#九、缓存"}},[t._v("#")]),t._v(" 九、缓存")]),t._v(" "),a("p",[t._v("Cache-Control")]),t._v(" "),a("ol",[a("li",[t._v("no-store 所有内容都不缓存")]),t._v(" "),a("li",[t._v("no-cache 缓存，但是在缓存前会向服务端确认缓存资源是否是最新")]),t._v(" "),a("li",[t._v("max-age=x 请求缓存后的 x 秒内不再发起请求")]),t._v(" "),a("li",[t._v("s-maxge=x CDN 请求源站缓存后的 x 秒内不再发起请求")]),t._v(" "),a("li",[t._v("public 客户端和 CDN 都可缓存")]),t._v(" "),a("li",[t._v("private 只有客户端可缓存")])]),t._v(" "),a("p",[t._v("Expires 过期时间")]),t._v(" "),a("p",[t._v("Last-Modified 响应头 服务端资源最新修改时间 精确到秒")]),t._v(" "),a("p",[t._v("If-Modified-Since 请求头 客户端资源最新修改时间（上次服务端提供的 Last-Modified）")]),t._v(" "),a("p",[t._v("Etag 响应头 服务端资源标识")]),t._v(" "),a("p",[t._v("If-None-Match 请求头 客户端缓存资源标识（上次服务端提供的 Etag）")]),t._v(" "),a("h3",{attrs:{id:"md5-hash-缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#md5-hash-缓存"}},[t._v("#")]),t._v(" MD5/hash 缓存")]),t._v(" "),a("p",[t._v("file_341j991nk91.js --\x3e file_aii8353km39.js")]),t._v(" "),a("h3",{attrs:{id:"cdn-缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cdn-缓存"}},[t._v("#")]),t._v(" CDN 缓存")]),t._v(" "),a("h2",{attrs:{id:"十、内容协商"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#十、内容协商"}},[t._v("#")]),t._v(" 十、内容协商")]),t._v(" "),a("p",[t._v("客户端：")]),t._v(" "),a("ol",[a("li",[t._v("Accept：告知服务端 客户端此次接受的媒体类型")]),t._v(" "),a("li",[t._v("Accept-Language：告知服务端 客户端此次接受的语言")]),t._v(" "),a("li",[t._v("Accept-Charset：告知服务端 客户端此次接受的字符集")]),t._v(" "),a("li",[t._v("Accept-Encoding：告知服务器 客户端此次接受的编码格式")])]),t._v(" "),a("p",[t._v("服务端：")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Content-Type")])]),t._v(" "),a("li",[a("p",[t._v("Content-Language")])]),t._v(" "),a("li",[a("p",[t._v("Content-Type")])]),t._v(" "),a("li",[a("p",[t._v("Content-Encoding")])])]),t._v(" "),a("h2",{attrs:{id:"十一、断点续传和多线程下载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#十一、断点续传和多线程下载"}},[t._v("#")]),t._v(" 十一、断点续传和多线程下载")]),t._v(" "),a("p",[t._v("请求头")]),t._v(" "),a("p",[t._v("​ Range：bytes=12400-")]),t._v(" "),a("p",[t._v("响应头 206")]),t._v(" "),a("p",[t._v("​ Content-Range：bytes 12400-/24000")]),t._v(" "),a("h2",{attrs:{id:"十二、https"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#十二、https"}},[t._v("#")]),t._v(" 十二、HTTPS")]),t._v(" "),a("p",[t._v("HTTP+TLS")]),t._v(" "),a("p",[t._v("优点：")]),t._v(" "),a("blockquote",[a("ol",[a("li",[t._v("内容加密")]),t._v(" "),a("li",[t._v("身份认证")]),t._v(" "),a("li",[t._v("数据完整")])])]),t._v(" "),a("p",[t._v("缺点：")]),t._v(" "),a("blockquote",[a("ol",[a("li",[t._v("证书费用以及更新维护")]),t._v(" "),a("li",[t._v("HTTPS 降低用户访问速度")]),t._v(" "),a("li",[t._v("消耗 CPU 资源，需要增加机器")])])]),t._v(" "),a("p",[t._v("加密方式：")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("对称加密 AES")]),t._v(" "),a("ol",[a("li",[t._v("客户端 a 发送密钥（key） 给 服务端 b")]),t._v(" "),a("li",[t._v("服务端 b 使用密钥（key）对文本加密后 发送给 客户端 a")]),t._v(" "),a("li",[t._v("客户端 a 使用密钥（key）进行解密")])]),t._v(" "),a("p",[t._v("问题：step1 的时候 密钥（key）就被中间人拦截")])]),t._v(" "),a("li",[a("p",[t._v("非对称加密 RSA")]),t._v(" "),a("ol",[a("li",[t._v("客户端 a 服务端 b 均拥有各自公钥和私钥")]),t._v(" "),a("li",[t._v("客户端 a 发送 a 的公钥（publicA） 给服务端 b")]),t._v(" "),a("li",[t._v("服务端 b 使用 a 的公钥（publicA）对文本加密后 发送给 客户端 a")]),t._v(" "),a("li",[t._v("客户端 a 使用 a 的私钥（privateA）对文本解密")])]),t._v(" "),a("p",[t._v("问题：在 setp2 的时候 a 的公钥（publicA）被 中间人拦截，中间人将其自己的公钥（publicC）发送给 b，b 使用中间人的公钥加密后发送给 a 的途中再次被中间人拦截并使用（privateC）进行解密")])]),t._v(" "),a("li",[a("p",[t._v("CA")]),t._v(" "),a("ol",[a("li",[t._v("服务端 b 的公钥发送给 CA，由 CA 的私钥加密得到 CA(publicB)")]),t._v(" "),a("li",[t._v("客户端 a 向服务端 b 发起请求")]),t._v(" "),a("li",[t._v("服务端 b 将 CA(publicB) 发送给 a")]),t._v(" "),a("li",[t._v("客户端 a 将 CA(publicB) 用 CA 的公钥解密得到 publicB， 并用 publicB 对 a 的 AES 密钥（key）进行加密，得到 publicB(key)发送给 服务端 b")]),t._v(" "),a("li",[t._v("服务端 b 使用 b 的私钥解密 publicB(key) 得到 key，并用 key 对文本加密发送给客户端 a，接下来就开始进行一系列对称加密流程")])])])]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/image-20200630174856609.png"}}),t._v(" "),a("h2",{attrs:{id:"十三、http1-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#十三、http1-1"}},[t._v("#")]),t._v(" 十三、HTTP1.1")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("TCP 连接数量限制")]),t._v(" "),a("ol",[a("li",[t._v("对于同一个域名，浏览器最多只能同时创建 6~8 个 TCP 连接 (不同浏览器不一样)。为了解决数量限制，出现了 域名分片 技术，其实就是资源分域，将资源放在不同域名下 (比如二级子域名下)，这样就可以针对不同域名创建连接并请求，以一种讨巧的方式突破限制，但是滥用此技术也会造成很多问题，比如每个 TCP 连接本身需要经过 DNS 查询、三步握手、慢启动等，还占用额外的 CPU 和内存，对于服务器来说过多连接也容易造成网络拥挤、交通阻塞等，对于移动端来说问题更明显")]),t._v(" "),a("li",[t._v("为了尽可能减少请求数，需要做合并文件、雪碧图、资源内联等优化工作，但是这无疑造成了单个请求内容变大延迟变高的问题，"),a("code",[t._v("且内嵌的资源不能有效地使用缓存机制")])])])]),t._v(" "),a("li",[a("p",[t._v("队头阻塞 (Head Of Line Blocking)")]),t._v(" "),a("p",[t._v("每个 TCP 连接同时只能处理一个请求 - 响应，浏览器按 FIFO 原则处理请求，如果上一个响应没返回，后续请求 - 响应都会受阻。为了解决此问题，出现了 管线化 - pipelining 技术，但是管线化存在诸多问题，比如第一个响应慢还是会阻塞后续响应、服务器为了按序返回相应需要缓存多个响应占用更多资源、浏览器中途断连重试服务器可能得重新处理多个请求、还有必须客户端 - 代理 - 服务器都支持管线化")])]),t._v(" "),a("li",[a("p",[t._v("请求只能由客户端发起，不能接受除响应以外的指令")])]),t._v(" "),a("li",[a("p",[t._v("请求/响应头部不经压缩就发送，每次互相发送相同的头部造成浪费")]),t._v(" "),a("p",[t._v("Header 内容多，而且每次请求 Header 不会变化太多，没有相应的压缩传输优化方案")])]),t._v(" "),a("li",[a("p",[t._v("非强制压缩发送")])]),t._v(" "),a("li",[a("p",[t._v("明文传输不安全")])])]),t._v(" "),a("h2",{attrs:{id:"十四、http2-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#十四、http2-0"}},[t._v("#")]),t._v(" 十四、HTTP2.0")]),t._v(" "),a("blockquote",[a("p",[t._v("参考："),a("a",{attrs:{href:"https://juejin.im/post/5b88a4f56fb9a01a0b31a67e",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP2 详解"),a("OutboundLink")],1)])]),t._v(" "),a("p",[a("strong",[t._v("优势：")])]),t._v(" "),a("ol",[a("li",[a("p",[t._v("二进制分帧层 (Binary Framing Layer)")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/20200719144756.png"}})]),t._v(" "),a("li",[a("p",[t._v("多路复用 (MultiPlexing)")]),t._v(" "),a("ol",[a("li",[t._v("在一个 TCP 连接上，我们可以向对方不断发送帧，每帧的 stream identifier 的标明这一帧属于哪个流，然后在对方接收时，根据 stream identifier 拼接每个流的所有帧组成一整块数据。把 HTTP/1.1 每个请求都当作一个流，那么多个请求变成多个流，请求响应数据分成多个帧，不同流中的帧交错地发送给对方，这就是 HTTP/2 中的多路复用。")]),t._v(" "),a("li",[t._v("流的概念实现了单连接上多请求 - 响应并行，解决了线头阻塞的问题，减少了 TCP 连接数量和 TCP 连接慢启动造成的问题，所以 http2 对于同一域名只需要创建一个连接，而不是像 http/1.1 那样创建 6~8 个连接")]),t._v(" "),a("li",[t._v("针对 http/1 的一些优化如：合并文件、内联资源、雪碧图、域名分片等，对于 HTTP/2 来说是不必要的，使用 h2 尽可能将资源细粒化，文件分解地尽可能散，不用担心请求数多")])])]),t._v(" "),a("li",[a("p",[t._v("服务端推送 (Server Push)")]),t._v(" "),a("p",[t._v("浏览器发送一个请求，服务器主动向浏览器推送与这个请求相关的资源，这样浏览器就不用发起后续请求。")]),t._v(" "),a("p",[t._v("Server-Push 主要是针对资源内联做出的优化，相较于 http/1.1 资源内联的优势:")]),t._v(" "),a("ul",[a("li",[t._v("客户端可以缓存推送的资源")]),t._v(" "),a("li",[t._v("客户端可以拒收推送过来的资源")]),t._v(" "),a("li",[t._v("推送资源可以由不同页面共享")]),t._v(" "),a("li",[t._v("服务器可以按照优先级推送资源")])])]),t._v(" "),a("li",[a("p",[t._v("Header 压缩 (HPACK)")]),t._v(" "),a("p",[t._v("使用 HPACK 算法来压缩首部内容")])]),t._v(" "),a("li",[a("p",[t._v("请求优先级设置")]),t._v(" "),a("p",[t._v("HTTP/2 里的每个 stream 都可以设置依赖 (Dependency) 和权重，可以按依赖树分配优先级，解决了关键请求被阻塞的问题")])]),t._v(" "),a("li",[a("p",[t._v("应用层的重置连接")]),t._v(" "),a("p",[t._v("对于 HTTP/1 来说，是通过设置 tcp segment 里的 reset flag 来通知对端关闭连接的。这种方式会直接断开连接，下次再发请求就必须重新建立连接。HTTP/2 引入 RST_STREAM 类型的 frame，可以在不断开连接的前提下取消某个 request 的 stream，表现更好")])]),t._v(" "),a("li",[a("p",[t._v("流量控制")]),t._v(" "),a("p",[t._v("每个 http2 流都拥有自己的公示的流量窗口，它可以限制另一端发送数据。对于每个流来说，两端都必须告诉对方自己还有足够的空间来处理新的数据，而在该窗口被扩大前，另一端只被允许发送这么多数据")])])]),t._v(" "),a("h2",{attrs:{id:"十五、http3-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#十五、http3-0"}},[t._v("#")]),t._v(" 十五、HTTP3.0")]),t._v(" "),a("ol",[a("li",[t._v("QUIC 协议")])]),t._v(" "),a("h2",{attrs:{id:"十六、websocket"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#十六、websocket"}},[t._v("#")]),t._v(" 十六、WebSocket")]),t._v(" "),a("blockquote",[a("p",[t._v("HTTP 协议的补充，与 HTTP 有交集")]),t._v(" "),a("p",[t._v("参考："),a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/149680021",target:"_blank",rel:"noopener noreferrer"}},[t._v("理解 websocket 的原理"),a("OutboundLink")],1)])]),t._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[t._v("// 请求 协议升级\n"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("Upgrade")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" websocket\n"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("Connection")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" upgrade\n"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("Sec-WebSocket-Key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("  //\n"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("Sec-WebSocket-Protocol")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("   // 区分统一url下不同服务所用的协议\n"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("Sec-WebSocket-Version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("   // 协议版本\n\n// 响应\nHTTP/1.1 101 Switching Protocols\n"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("Upgrade")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" websocket\n"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("Connection")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" upgrade\n"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("Sec-WebSocket-Accept")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("Sec-WebSocket-Protocol")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("  // 使用的协议\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/image-20200630183559298.png"}}),t._v(" "),a("h2",{attrs:{id:"十七、安全"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#十七、安全"}},[t._v("#")]),t._v(" 十七、安全")]),t._v(" "),a("ol",[a("li",[t._v("Authentication （验证）：用来确认某用户、服务、应用身份的攻击手段")]),t._v(" "),a("li",[t._v("Authorization（授权）：用来决定某用户、服务、应用是否具有执行请求权限的攻击手段")]),t._v(" "),a("li",[t._v("Client-Side Attacks（客户端攻击）：用来扰乱或者探测 web 站点用户的攻击手段")]),t._v(" "),a("li",[t._v("Command Execution（命令执行）：在 web 站点执行远程命令的攻击手段")]),t._v(" "),a("li",[t._v("Information Disclosure（信息暴露）：用来获取 web 站点具体系统信息的攻击手段")]),t._v(" "),a("li",[t._v("Logical Attacks（逻辑性攻击）：用来扰乱或是探测 web 应用逻辑流程的攻击手段")])]),t._v(" "),a("p",[t._v("登录验证：")]),t._v(" "),a("ol",[a("li",[t._v("暴力破解\n"),a("ol",[a("li",[t._v("验证码")]),t._v(" "),a("li",[t._v("修改 cookie，达到某个逻辑值则不允许登录")]),t._v(" "),a("li",[t._v("双因子认证")])])])]),t._v(" "),a("h3",{attrs:{id:"xss"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xss"}},[t._v("#")]),t._v(" XSS")]),t._v(" "),a("blockquote",[a("p",[t._v("Cross-Site Scripting（跨站脚本攻击），攻击者通过在目标网站上注入恶意脚本，使之在用户的浏览器上运行。利用这些恶意脚本，攻击者可获取用户的敏感信息如 Cookie、SessionID 等，进而危害数据安全。")]),t._v(" "),a("p",[t._v("参考："),a("a",{attrs:{href:"https://tech.meituan.com/2018/09/27/fe-security.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何防止 XSS 攻击？"),a("OutboundLink")],1)])]),t._v(" "),a("ol",[a("li",[a("p",[t._v("存储型")]),t._v(" "),a("ol",[a("li",[t._v("攻击者将恶意代码提交到目标网站的数据库中。")]),t._v(" "),a("li",[t._v("用户打开目标网站时，网站服务端将恶意代码从数据库取出，拼接在 HTML 中返回给浏览器。")]),t._v(" "),a("li",[t._v("用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行。")]),t._v(" "),a("li",[t._v("恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作。\n这种攻击常见于带有用户保存数据的网站功能，如论坛发帖、商品评论、用户私信等")])])]),t._v(" "),a("li",[a("p",[t._v("反射型")]),t._v(" "),a("ol",[a("li",[t._v("攻击者构造出特殊的 URL，其中包含恶意代码。")]),t._v(" "),a("li",[t._v("用户打开带有恶意代码的 URL 时，网站服务端将恶意代码从 URL 中取出，拼接在 HTML 中返回给浏览器。")]),t._v(" "),a("li",[t._v("用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行。")]),t._v(" "),a("li",[t._v("恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作\n反射型 XSS 跟存储型 XSS 的区别是：存储型 XSS 的恶意代码存在数据库里，反射型 XSS 的恶意代码存在 URL 里。\n反射型 XSS 漏洞常见于通过 URL 传递参数的功能，如网站搜索、跳转等。\n由于需要用户主动打开恶意的 URL 才能生效，攻击者往往会结合多种手段诱导用户点击。\nPOST 的内容也可以触发反射型 XSS，只不过其触发条件比较苛刻（需要构造表单提交页面，并引导用户点击），所以非常少见")])])]),t._v(" "),a("li",[a("p",[t._v("DOM 型")]),t._v(" "),a("ol",[a("li",[t._v("攻击者构造出特殊的 URL，其中包含恶意代码。")]),t._v(" "),a("li",[t._v("用户打开带有恶意代码的 URL。")]),t._v(" "),a("li",[t._v("用户浏览器接收到响应后解析执行，前端 JavaScript 取出 URL 中的恶意代码并执行。")]),t._v(" "),a("li",[t._v("恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作。\nDOM 型 XSS 跟前两种 XSS 的区别：DOM 型 XSS 攻击中，取出和执行恶意代码由浏览器端完成，属于前端 JavaScript 自身的安全漏洞，而其他两种 XSS 都属于服务端的安全漏洞。")])])])]),t._v(" "),a("p",[a("strong",[t._v("预防：")])]),t._v(" "),a("ol",[a("li",[a("p",[t._v("输入过滤")])]),t._v(" "),a("li",[a("p",[t._v("纯前端渲染--针对存储型和反射型 XSS")])]),t._v(" "),a("li",[a("p",[t._v("转义 HTML--针对存储型和反射型 XSS")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- HTML 标签内文字内容 --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("<%= Encode.forHtml(UNTRUSTED) %>"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- HTML 标签属性值 --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("<%= Encode.forHtml(UNTRUSTED) %>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- CSS 属性值 --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token style-attr"}},[a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{pre:!0,attrs:{class:"token style language-css"}},[a("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("<%= Encode."),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forCssString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("UNTRUSTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" %>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- CSS URL --\x3e")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token style-attr"}},[a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{pre:!0,attrs:{class:"token style language-css"}},[a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("<%= Encode."),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forCssUrl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("UNTRUSTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" %>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- JavaScript 内联代码块 --\x3e")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<%= Encode.forJavaScript(UNTRUSTED) %>'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- JavaScript 内联代码块内嵌 JSON --\x3e")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" __INITIAL_STATE__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<%= Encoder.forJavaScript(data.to_json) %>'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- HTML 标签内联监听器 --\x3e")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onclick")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("alert("),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("<%= Encode.forJavaScript(UNTRUSTED) %>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(");"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      click me\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- URL 参数 --\x3e")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/search?value=<%= Encode.forUriComponent(UNTRUSTED) %>&order=1#top"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- URL 路径 --\x3e")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/page/<%= Encode.forUriComponent(UNTRUSTED) %>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('\x3c!--\n  URL.\n  注意：要根据项目情况进行过滤，禁止掉 "javascript:" 链接、非法 scheme 等\n--\x3e')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("<%=\n  urlValidator.isValid(UNTRUSTED) ?\n    Encode.forHtml(UNTRUSTED) :\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/404"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("\n%>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          link\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br"),a("span",{staticClass:"line-number"},[t._v("41")]),a("br"),a("span",{staticClass:"line-number"},[t._v("42")]),a("br"),a("span",{staticClass:"line-number"},[t._v("43")]),a("br"),a("span",{staticClass:"line-number"},[t._v("44")]),a("br"),a("span",{staticClass:"line-number"},[t._v("45")]),a("br"),a("span",{staticClass:"line-number"},[t._v("46")]),a("br"),a("span",{staticClass:"line-number"},[t._v("47")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("杜绝不可信数据被执行--针对存储型和反射型 XSS")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 内联事件监听器中包含恶意代码 --\x3e")]),t._v("\n![](https://awps-assets.meituan.net/mit-x/blog-images-bundle-2018b/3e724ce0.data:image/png,)\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 链接内包含恶意代码 --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("UNTRUSTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// setTimeout()/setInterval() 中调用恶意代码")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'UNTRUSTED'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'UNTRUSTED'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// location 调用恶意代码")]),t._v("\n  location"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'UNTRUSTED'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// eval() 中调用恶意代码")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("eval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'UNTRUSTED'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br")])])])]),t._v(" "),a("h3",{attrs:{id:"csrf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#csrf"}},[t._v("#")]),t._v(" CSRF")]),t._v(" "),a("blockquote",[a("p",[t._v("CSRF（Cross-site request forgery）跨站请求伪造：攻击者诱导受害者进入第三方网站，在第三方网站中，向被攻击网站发送跨站请求。利用受害者在被攻击网站已经获取的注册凭证，绕过后台的用户验证，达到冒充用户对被攻击的网站执行某项操作的目的")]),t._v(" "),a("p",[t._v("参考："),a("a",{attrs:{href:"https://tech.meituan.com/2018/10/11/fe-security-csrf.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何防止 CSRF 攻击？"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("预防：")]),t._v(" "),a("ol",[a("li",[t._v("阻止不明外域的访问")])]),t._v(" "),a("ul",[a("li",[t._v("同源检测：Origin Header、Referer Header")]),t._v(" "),a("li",[t._v("Samesite Cookie")])]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("提交时要求附加本域才能获取的信息")])]),t._v(" "),a("ul",[a("li",[t._v("CSRF Token")]),t._v(" "),a("li",[t._v("双重 Cookie 验证")])]),t._v(" "),a("h3",{attrs:{id:"sql-注入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sql-注入"}},[t._v("#")]),t._v(" SQL 注入")]),t._v(" "),a("p",[t._v("通过提交 sql 语法导致数据泄漏")])])}),[],!1,null,null,null);s.default=n.exports}}]);