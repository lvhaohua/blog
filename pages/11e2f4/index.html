<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>一次搞懂网络协议 | Hugo</title>
    <meta name="generator" content="Hugo 1.8.0" />
    <link rel="icon" href="/blog/img/Hicon.svg">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <meta name="description" content="web前端技术博客,简洁至上,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#3eaf7c"> <link rel="preload" href="/blog/assets/css/0.styles.c556f75b.css" as="style"><link rel="preload" href="/blog/assets/js/app.9aa4386c.js" as="script"><link rel="preload" href="/blog/assets/js/2.a9d98552.js" as="script"><link rel="preload" href="/blog/assets/js/3.1dbb2db0.js" as="script"><link rel="preload" href="/blog/assets/js/34.3b1bf57e.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.5d07c5cb.js"><link rel="prefetch" href="/blog/assets/js/11.6c11c37e.js"><link rel="prefetch" href="/blog/assets/js/12.5784f04e.js"><link rel="prefetch" href="/blog/assets/js/13.dadce8bc.js"><link rel="prefetch" href="/blog/assets/js/14.f5df19da.js"><link rel="prefetch" href="/blog/assets/js/15.39d1e5be.js"><link rel="prefetch" href="/blog/assets/js/16.8524b573.js"><link rel="prefetch" href="/blog/assets/js/17.2da4c759.js"><link rel="prefetch" href="/blog/assets/js/18.0231d4a2.js"><link rel="prefetch" href="/blog/assets/js/19.939ae5dc.js"><link rel="prefetch" href="/blog/assets/js/20.e2ce4be0.js"><link rel="prefetch" href="/blog/assets/js/21.dbef836e.js"><link rel="prefetch" href="/blog/assets/js/22.bec05a0c.js"><link rel="prefetch" href="/blog/assets/js/23.3caef8f6.js"><link rel="prefetch" href="/blog/assets/js/24.02b635d8.js"><link rel="prefetch" href="/blog/assets/js/25.f62b10de.js"><link rel="prefetch" href="/blog/assets/js/26.608f9c59.js"><link rel="prefetch" href="/blog/assets/js/27.f5e6b611.js"><link rel="prefetch" href="/blog/assets/js/28.2b849bed.js"><link rel="prefetch" href="/blog/assets/js/29.946311c2.js"><link rel="prefetch" href="/blog/assets/js/30.a60e302f.js"><link rel="prefetch" href="/blog/assets/js/31.53e77f72.js"><link rel="prefetch" href="/blog/assets/js/32.e5203f5e.js"><link rel="prefetch" href="/blog/assets/js/33.b3dea110.js"><link rel="prefetch" href="/blog/assets/js/35.a6b89190.js"><link rel="prefetch" href="/blog/assets/js/36.62418a59.js"><link rel="prefetch" href="/blog/assets/js/37.275d7def.js"><link rel="prefetch" href="/blog/assets/js/38.b4b87371.js"><link rel="prefetch" href="/blog/assets/js/39.5528590b.js"><link rel="prefetch" href="/blog/assets/js/4.cc7318a9.js"><link rel="prefetch" href="/blog/assets/js/40.45d2cb78.js"><link rel="prefetch" href="/blog/assets/js/41.41852fcd.js"><link rel="prefetch" href="/blog/assets/js/42.034cf2ed.js"><link rel="prefetch" href="/blog/assets/js/43.c49436a1.js"><link rel="prefetch" href="/blog/assets/js/44.aed230a4.js"><link rel="prefetch" href="/blog/assets/js/45.c7c36e87.js"><link rel="prefetch" href="/blog/assets/js/46.f0e7a723.js"><link rel="prefetch" href="/blog/assets/js/47.2490ef30.js"><link rel="prefetch" href="/blog/assets/js/48.1fda57fe.js"><link rel="prefetch" href="/blog/assets/js/49.57127341.js"><link rel="prefetch" href="/blog/assets/js/5.0e1e07eb.js"><link rel="prefetch" href="/blog/assets/js/50.3b4851d1.js"><link rel="prefetch" href="/blog/assets/js/51.805a774b.js"><link rel="prefetch" href="/blog/assets/js/52.f6bea271.js"><link rel="prefetch" href="/blog/assets/js/53.ff52959a.js"><link rel="prefetch" href="/blog/assets/js/54.2a0f5d1a.js"><link rel="prefetch" href="/blog/assets/js/55.1a88c024.js"><link rel="prefetch" href="/blog/assets/js/56.bda97f74.js"><link rel="prefetch" href="/blog/assets/js/57.2bbc89a5.js"><link rel="prefetch" href="/blog/assets/js/58.e26e3297.js"><link rel="prefetch" href="/blog/assets/js/59.00c8f087.js"><link rel="prefetch" href="/blog/assets/js/6.1994325e.js"><link rel="prefetch" href="/blog/assets/js/60.38387316.js"><link rel="prefetch" href="/blog/assets/js/61.675d5e82.js"><link rel="prefetch" href="/blog/assets/js/62.58c404c3.js"><link rel="prefetch" href="/blog/assets/js/63.327a83cb.js"><link rel="prefetch" href="/blog/assets/js/64.808c39e5.js"><link rel="prefetch" href="/blog/assets/js/65.17be1d3f.js"><link rel="prefetch" href="/blog/assets/js/66.02ad462d.js"><link rel="prefetch" href="/blog/assets/js/67.fb4624b4.js"><link rel="prefetch" href="/blog/assets/js/68.239d3a4d.js"><link rel="prefetch" href="/blog/assets/js/69.4afc5d30.js"><link rel="prefetch" href="/blog/assets/js/7.6e14dae2.js"><link rel="prefetch" href="/blog/assets/js/70.08c84d15.js"><link rel="prefetch" href="/blog/assets/js/71.75b1aa65.js"><link rel="prefetch" href="/blog/assets/js/72.2585477a.js"><link rel="prefetch" href="/blog/assets/js/73.949ea435.js"><link rel="prefetch" href="/blog/assets/js/74.995ebe6a.js"><link rel="prefetch" href="/blog/assets/js/75.b1193e9c.js"><link rel="prefetch" href="/blog/assets/js/76.f6e644a4.js"><link rel="prefetch" href="/blog/assets/js/77.aff9d0b5.js"><link rel="prefetch" href="/blog/assets/js/78.aaea6251.js"><link rel="prefetch" href="/blog/assets/js/79.cd5a5531.js"><link rel="prefetch" href="/blog/assets/js/8.85cdacaa.js"><link rel="prefetch" href="/blog/assets/js/80.d35085f2.js"><link rel="prefetch" href="/blog/assets/js/81.8af9b157.js"><link rel="prefetch" href="/blog/assets/js/82.6bbd291d.js"><link rel="prefetch" href="/blog/assets/js/83.7b48bc52.js"><link rel="prefetch" href="/blog/assets/js/84.1da8a02b.js"><link rel="prefetch" href="/blog/assets/js/85.b59e4e07.js"><link rel="prefetch" href="/blog/assets/js/86.1dd5c331.js"><link rel="prefetch" href="/blog/assets/js/87.e9f57317.js"><link rel="prefetch" href="/blog/assets/js/88.53598c73.js"><link rel="prefetch" href="/blog/assets/js/89.e9e68dd6.js"><link rel="prefetch" href="/blog/assets/js/9.21126bad.js"> <link rel="stylesheet" href="/blog/assets/css/0.styles.c556f75b.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/img/Logo.svg" alt="Hugo" class="logo"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/blog/fe/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/pages/0ae13f/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/blog/pages/f0f763/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/blog/pages/8c928a/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/blog/pages/8c928a/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/blog/pages/430ae1/" class="nav-link">CSS</a></li></ul></li><li class="dropdown-item"><h4>前端图形学</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/pages/8309a5b876fc95e3/" class="nav-link">WebGL/Three.js</a></li><li class="dropdown-subitem"><a href="/blog/pages/8309a5b876fc95e3/" class="nav-link">数学基础</a></li></ul></li><li class="dropdown-item"><h4>前端工程化</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/pages/5d463fbdb172d43b/" class="nav-link">CLI/Vite/Webpack</a></li><li class="dropdown-subitem"><a href="/blog/pages/5d463fbdb172d43b/" class="nav-link">CI/CD</a></li><li class="dropdown-subitem"><a href="/blog/pages/c3f272/" class="nav-link">前端监控/稳定性治理</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/pages/d42f97/" class="nav-link">技术调研</a></li><li class="dropdown-subitem"><a href="/blog/pages/11e2f4/" aria-current="page" class="nav-link router-link-exact-active router-link-active">浏览器渲染原理</a></li><li class="dropdown-subitem"><a href="/blog/pages/5d463fbdb172d43b/" class="nav-link">网络协议</a></li><li class="dropdown-subitem"><a href="/blog/pages/5d463fbdb172d43b/" class="nav-link">设计模式</a></li><li class="dropdown-subitem"><a href="/blog/pages/8309a5b876fc95e3/" class="nav-link">Rust</a></li><li class="dropdown-subitem"><a href="/blog/pages/8309a5b876fc95e3/" class="nav-link">WebAssembly</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/blog/be/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/5d463fbdb172d43b/" class="nav-link">Node.js</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/fa5712/" class="nav-link">Nest.js</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/0a83b083bdf257cb/" class="nav-link">GraphQL</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/0a83b083bdf257cb/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/0a83b083bdf257cb/" class="nav-link">TypeORM</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><a href="/blog/algorithm/" class="link-title">算法</a> <span class="title" style="display:none;">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>复杂度</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/pages/66ba76/" class="nav-link">时间复杂度</a></li><li class="dropdown-subitem"><a href="/blog/pages/040921/" class="nav-link">空间复杂度</a></li></ul></li><li class="dropdown-item"><h4>数据结构与算法</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/pages/66ba76/" class="nav-link">数组</a></li><li class="dropdown-subitem"><a href="/blog/pages/040921/" class="nav-link">链表</a></li><li class="dropdown-subitem"><a href="/blog/pages/2b0efc/" class="nav-link">栈</a></li><li class="dropdown-subitem"><a href="/blog/pages/dad383/" class="nav-link">队列</a></li><li class="dropdown-subitem"><a href="/blog/pages/3c7eab/" class="nav-link">字符串</a></li><li class="dropdown-subitem"><a href="/blog/pages/8c928a/" class="nav-link">堆</a></li><li class="dropdown-subitem"><a href="/blog/pages/8c928a/" class="nav-link">图</a></li><li class="dropdown-subitem"><a href="/blog/pages/8c928a/" class="nav-link">跳表</a></li><li class="dropdown-subitem"><a href="/blog/pages/8c928a/" class="nav-link">散列表</a></li><li class="dropdown-subitem"><a href="/blog/pages/deb946/" class="nav-link">二叉树</a></li><li class="dropdown-subitem"><a href="/blog/pages/8c928a/" class="nav-link">红黑树</a></li><li class="dropdown-subitem"><a href="/blog/pages/8c928a/" class="nav-link">递归树</a></li><li class="dropdown-subitem"><a href="/blog/pages/33ceb4/" class="nav-link">排序</a></li><li class="dropdown-subitem"><a href="/blog/pages/b3a588/" class="nav-link">二分查找</a></li><li class="dropdown-subitem"><a href="/blog/pages/8c928a/" class="nav-link">哈希算法</a></li><li class="dropdown-subitem"><a href="/blog/pages/8c928a/" class="nav-link">递归</a></li><li class="dropdown-subitem"><a href="/blog/pages/9fa6c9/" class="nav-link">贪心</a></li><li class="dropdown-subitem"><a href="/blog/pages/18a638/" class="nav-link">分治</a></li><li class="dropdown-subitem"><a href="/blog/pages/14623a/" class="nav-link">回溯</a></li><li class="dropdown-subitem"><a href="/blog/pages/25dc33/" class="nav-link">动态规划</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/blog/more/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="归类" class="dropdown-title"><a href="/blog/archives/" class="link-title">归类</a> <span class="title" style="display:none;">归类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/blog/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/blog/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><a href="/blog/about/" class="nav-link">关于</a></div> <a href="https://github.com/lvhaohua" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/20210624165139.png"> <div class="blogger-info"><h3></h3> <span></span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/blog/fe/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/pages/0ae13f/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/blog/pages/f0f763/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/blog/pages/8c928a/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/blog/pages/8c928a/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/blog/pages/430ae1/" class="nav-link">CSS</a></li></ul></li><li class="dropdown-item"><h4>前端图形学</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/pages/8309a5b876fc95e3/" class="nav-link">WebGL/Three.js</a></li><li class="dropdown-subitem"><a href="/blog/pages/8309a5b876fc95e3/" class="nav-link">数学基础</a></li></ul></li><li class="dropdown-item"><h4>前端工程化</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/pages/5d463fbdb172d43b/" class="nav-link">CLI/Vite/Webpack</a></li><li class="dropdown-subitem"><a href="/blog/pages/5d463fbdb172d43b/" class="nav-link">CI/CD</a></li><li class="dropdown-subitem"><a href="/blog/pages/c3f272/" class="nav-link">前端监控/稳定性治理</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/pages/d42f97/" class="nav-link">技术调研</a></li><li class="dropdown-subitem"><a href="/blog/pages/11e2f4/" aria-current="page" class="nav-link router-link-exact-active router-link-active">浏览器渲染原理</a></li><li class="dropdown-subitem"><a href="/blog/pages/5d463fbdb172d43b/" class="nav-link">网络协议</a></li><li class="dropdown-subitem"><a href="/blog/pages/5d463fbdb172d43b/" class="nav-link">设计模式</a></li><li class="dropdown-subitem"><a href="/blog/pages/8309a5b876fc95e3/" class="nav-link">Rust</a></li><li class="dropdown-subitem"><a href="/blog/pages/8309a5b876fc95e3/" class="nav-link">WebAssembly</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/blog/be/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/5d463fbdb172d43b/" class="nav-link">Node.js</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/fa5712/" class="nav-link">Nest.js</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/0a83b083bdf257cb/" class="nav-link">GraphQL</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/0a83b083bdf257cb/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/0a83b083bdf257cb/" class="nav-link">TypeORM</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><a href="/blog/algorithm/" class="link-title">算法</a> <span class="title" style="display:none;">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>复杂度</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/pages/66ba76/" class="nav-link">时间复杂度</a></li><li class="dropdown-subitem"><a href="/blog/pages/040921/" class="nav-link">空间复杂度</a></li></ul></li><li class="dropdown-item"><h4>数据结构与算法</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/pages/66ba76/" class="nav-link">数组</a></li><li class="dropdown-subitem"><a href="/blog/pages/040921/" class="nav-link">链表</a></li><li class="dropdown-subitem"><a href="/blog/pages/2b0efc/" class="nav-link">栈</a></li><li class="dropdown-subitem"><a href="/blog/pages/dad383/" class="nav-link">队列</a></li><li class="dropdown-subitem"><a href="/blog/pages/3c7eab/" class="nav-link">字符串</a></li><li class="dropdown-subitem"><a href="/blog/pages/8c928a/" class="nav-link">堆</a></li><li class="dropdown-subitem"><a href="/blog/pages/8c928a/" class="nav-link">图</a></li><li class="dropdown-subitem"><a href="/blog/pages/8c928a/" class="nav-link">跳表</a></li><li class="dropdown-subitem"><a href="/blog/pages/8c928a/" class="nav-link">散列表</a></li><li class="dropdown-subitem"><a href="/blog/pages/deb946/" class="nav-link">二叉树</a></li><li class="dropdown-subitem"><a href="/blog/pages/8c928a/" class="nav-link">红黑树</a></li><li class="dropdown-subitem"><a href="/blog/pages/8c928a/" class="nav-link">递归树</a></li><li class="dropdown-subitem"><a href="/blog/pages/33ceb4/" class="nav-link">排序</a></li><li class="dropdown-subitem"><a href="/blog/pages/b3a588/" class="nav-link">二分查找</a></li><li class="dropdown-subitem"><a href="/blog/pages/8c928a/" class="nav-link">哈希算法</a></li><li class="dropdown-subitem"><a href="/blog/pages/8c928a/" class="nav-link">递归</a></li><li class="dropdown-subitem"><a href="/blog/pages/9fa6c9/" class="nav-link">贪心</a></li><li class="dropdown-subitem"><a href="/blog/pages/18a638/" class="nav-link">分治</a></li><li class="dropdown-subitem"><a href="/blog/pages/14623a/" class="nav-link">回溯</a></li><li class="dropdown-subitem"><a href="/blog/pages/25dc33/" class="nav-link">动态规划</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/blog/more/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="归类" class="dropdown-title"><a href="/blog/archives/" class="link-title">归类</a> <span class="title" style="display:none;">归类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/blog/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/blog/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><a href="/blog/about/" class="nav-link">关于</a></div> <a href="https://github.com/lvhaohua" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>图形学</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>其他</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>技术调研</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>浏览器渲染原理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>网络协议</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/pages/11e2f4/" aria-current="page" class="active sidebar-link">一次搞懂网络协议</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#一、网络通信模型" class="sidebar-link">一、网络通信模型</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#二、dns-解析" class="sidebar-link">二、DNS 解析</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#三、建立和释放-tcp-链接" class="sidebar-link">三、建立和释放 TCP 链接</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#_3-1-三次握手" class="sidebar-link">3.1 三次握手</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#_3-2-四次挥手" class="sidebar-link">3.2 四次挥手</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#四、http-报文" class="sidebar-link">四、HTTP 报文</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#_4-1-请求报文" class="sidebar-link">4.1 请求报文</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#_4-2-响应报文" class="sidebar-link">4.2 响应报文</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#_4-3-通用首部-general-header-fields" class="sidebar-link">4.3 通用首部（General Header Fields）</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#_4-4-请求首部-request-header-fields" class="sidebar-link">4.4 请求首部（Request Header Fields）</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#_4-5-响应首部-response-header-fields" class="sidebar-link">4.5 响应首部（Response Header Fields）</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#_4-6-实体首部-entity-header-fields" class="sidebar-link">4.6 实体首部（Entity Header Fields）</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#_4-7-其他" class="sidebar-link">4.7 其他</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#五、http-方法" class="sidebar-link">五、HTTP 方法</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#六、状态码" class="sidebar-link">六、状态码</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#_2xx-成功" class="sidebar-link">2xx 成功</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#_3xx-重定向" class="sidebar-link">3xx 重定向</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#_4xx-客户端错误" class="sidebar-link">4xx 客户端错误</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#_5xx-服务端错误" class="sidebar-link">5xx 服务端错误</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#七、无连接性" class="sidebar-link">七、无连接性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#_7-1-keep-alive" class="sidebar-link">7.1 keep-alive</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#_7-2-管线化" class="sidebar-link">7.2 管线化</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#八、无状态性" class="sidebar-link">八、无状态性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#_8-1-cookie" class="sidebar-link">8.1 Cookie</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#_8-2-session" class="sidebar-link">8.2 Session</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#九、缓存" class="sidebar-link">九、缓存</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#md5-hash-缓存" class="sidebar-link">MD5/hash 缓存</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#cdn-缓存" class="sidebar-link">CDN 缓存</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#十、内容协商" class="sidebar-link">十、内容协商</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#十一、断点续传和多线程下载" class="sidebar-link">十一、断点续传和多线程下载</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#十二、https" class="sidebar-link">十二、HTTPS</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#十三、http1-1" class="sidebar-link">十三、HTTP1.1</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#十四、http2-0" class="sidebar-link">十四、HTTP2.0</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#十五、http3-0" class="sidebar-link">十五、HTTP3.0</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#十六、websocket" class="sidebar-link">十六、WebSocket</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#十七、安全" class="sidebar-link">十七、安全</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#xss" class="sidebar-link">XSS</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#csrf" class="sidebar-link">CSRF</a></li><li class="sidebar-sub-header"><a href="/blog/pages/11e2f4/#sql-注入" class="sidebar-link">SQL 注入</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Rust</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>WebAssembly</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-3f559690><div class="articleInfo" data-v-3f559690><ul class="breadcrumbs" data-v-3f559690><li data-v-3f559690><a href="/blog/" title="首页" class="iconfont icon-home router-link-active" data-v-3f559690></a></li> <li data-v-3f559690><a href="/blog/fe" title="前端-目录页" data-v-3f559690>前端</a></li> <li data-v-3f559690><a href="/blog/fe/#其他" title="前端#其他" data-v-3f559690>其他</a></li> <li data-v-3f559690><a href="/blog/fe/#网络协议" title="前端#网络协议" data-v-3f559690>网络协议</a></li></ul> <div class="info" data-v-3f559690><div title="作者" class="author iconfont icon-touxiang" data-v-3f559690><a href="https://github.com/lvhaohua" target="_blank" title="作者" class="beLink" data-v-3f559690>lvhaohua</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-3f559690><a href="javascript:;" data-v-3f559690>2021-09-16</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          一次搞懂网络协议
        </h1> <!----> <div class="theme-vdoing-content content__default"><p>介绍了 DNS 解析、TCP 链接过程、HTTP 协议的发展历程</p> <h2 id="一、网络通信模型"><a href="#一、网络通信模型" class="header-anchor">#</a> 一、网络通信模型</h2> <img src="https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/image-20200508001100626.png" style="zoom:50%;"> <h2 id="二、dns-解析"><a href="#二、dns-解析" class="header-anchor">#</a> 二、DNS 解析</h2> <ol><li><p>先从本地 host 文件获取 ip 地址</p></li> <li><p>从本地 dns 服务器获取 ip 地址</p></li> <li><p>一层一层向 dns 根服务器查询 ip 地址</p> <img src="https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/image-20200508190731958.png" style="zoom:50%;"></li> <li><p>优化：</p> <p>原因：查找 DNS 是需要花费时间的，需要 20 毫秒左右的时间，会阻塞浏览器接下来要进行的一些列操作。</p> <p>方案：</p> <ol><li><p>减少 DNS 查找次数，最理想的方法就是将所有的内容资源都放在同一个域(Domain)下面，这样访问整个网站就只需要进行一次 DNS 查找，这样可以提高性能。</p></li> <li><p>由于这些资源都在同一个域，而 HTTP/1.1 中推荐客户端针对每个域只有一定数量的并行度（它的建议是 2），那么就会出现下载资源时的排队现象，这样就会降低性能。可升级 HTTP/2.0。</p></li> <li><p>link prefetching：https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Link_prefetching_FAQ</p></li></ol></li></ol> <h2 id="三、建立和释放-tcp-链接"><a href="#三、建立和释放-tcp-链接" class="header-anchor">#</a> 三、建立和释放 TCP 链接</h2> <blockquote><p>参考文档：https://blog.csdn.net/qzcsu/article/details/72861891</p></blockquote> <h3 id="_3-1-三次握手"><a href="#_3-1-三次握手" class="header-anchor">#</a> 3.1 三次握手</h3> <ol><li><p>客户端发送 seq = x 和 SYN = 1 标识至服务端表示期望建立链接</p></li> <li><p>服务端返回 seq = y，ack = x + 1 和 SYN = 1，ACK = 1 和至客户端</p></li> <li><p>客户端发送 seq = x + 1,ack = y + 1 和 ACK = 1 至服务端确认</p> <img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNjA3MjA1NzA5MzY3?x-oss-process=image/format,png" style="zoom:50%;"> <img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNjA1MTEwNDA1NjY2?x-oss-process=image/format,png" style="zoom:50%;"></li></ol> <h3 id="_3-2-四次挥手"><a href="#_3-2-四次挥手" class="header-anchor">#</a> 3.2 四次挥手</h3> <ol><li><p>客户端在请求结束后，主动向服务端发起 seq = u 和 FIN = 1 标志表示要释放链接</p></li> <li><p>服务端收到释放报文后，向客户端发送 seq = v，ack = u + 1 和 ACK = 1 并进入 CLOSE_WAIT 状态，还有可能发送数据</p></li> <li><p>服务器在发送完所有数据后，主动向客户端发送 seq = w，ack = u + 1 和 FIN = 1 标志报文进行最后的确认，进入 LAST_ACK 状态</p></li> <li><p>客户端收到服务端释放报文后，向服务端发送 seq = u + 1，ack = w + 1 和 ACK = 1 报文确认释放</p> <p><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNjA3MjA1NzU2MjU1?x-oss-process=image/format,png" alt=""></p> <img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwNjA2MDg0ODUxMjcy?x-oss-process=image/format,png" style="zoom:50%;"></li></ol> <h2 id="四、http-报文"><a href="#四、http-报文" class="header-anchor">#</a> 四、HTTP 报文</h2> <h3 id="_4-1-请求报文"><a href="#_4-1-请求报文" class="header-anchor">#</a> 4.1 请求报文</h3> <p><img src="https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/20200708012532.png" alt="请求报文结构"></p> <h3 id="_4-2-响应报文"><a href="#_4-2-响应报文" class="header-anchor">#</a> 4.2 响应报文</h3> <p><img src="https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/20200708012640.png" alt="响应报文结构"></p> <h3 id="_4-3-通用首部-general-header-fields"><a href="#_4-3-通用首部-general-header-fields" class="header-anchor">#</a> 4.3 通用首部（General Header Fields）</h3> <table><thead><tr><th>首部字段名</th> <th>说明</th></tr></thead> <tbody><tr><td><strong>Cache-Control</strong> *</td> <td>控制缓存（缓存服务器）的行为<br>1.no-cache: 不缓存过期的资源,先确定资源有效性<br>2.no-store：不缓存资源<br>3.max-age：有效期内不再校验有效性，返回缓存资源，忽略 Expires<br>4.s-maxage：仅适用于供多位用户使用的公共缓存服务器，同 max-age，忽略 Expires 和 max-age</td></tr> <tr><td><strong>Connection</strong> *</td> <td>链接方式 <br>1.keep-alive: 长连接<br>2.close：短连接</td></tr> <tr><td>Date *</td> <td>创建报文的日期时间</td></tr> <tr><td>Pragma</td> <td>同 Cache-Control</td></tr> <tr><td>Trailer</td> <td>报文末端的首部一览</td></tr> <tr><td>Transfer-Encoding</td> <td>传输报文主体时采用的编码方式<br>1.chunked：分块传输</td></tr> <tr><td>Upgrade</td> <td>升级为其他协议</td></tr> <tr><td>Via</td> <td>追踪传输路径，代理服务器的相关信息，同 TRACE 一起使用</td></tr> <tr><td>Warning</td> <td>错误通知，通常会告知用户一些与缓存相关的问题的警告</td></tr></tbody></table> <h3 id="_4-4-请求首部-request-header-fields"><a href="#_4-4-请求首部-request-header-fields" class="header-anchor">#</a> 4.4 请求首部（Request Header Fields）</h3> <table><thead><tr><th>首部字段名</th> <th>说明</th></tr></thead> <tbody><tr><td><strong>Accept</strong> *</td> <td>用户代理（浏览器）可处理的媒体类型，如：text/html,application/xml,image/jpeg</td></tr> <tr><td><strong>Accept-Charset</strong> *</td> <td>优先的字符集</td></tr> <tr><td><strong>Accept-Encoding</strong> *</td> <td>优先支持的内容编码压缩方式：gzip，deflate</td></tr> <tr><td><strong>Accept-Language</strong> *</td> <td>优先的语言（自然语言）q 指定权重：zh-cn,zh;q=0.7,en-us,en;q=0.3</td></tr> <tr><td>Authorization</td> <td>Web 认证信息，401 时带上 Authorization</td></tr> <tr><td>Expect</td> <td>期待服务器的特定行为</td></tr> <tr><td>From</td> <td>用户的电子邮箱地址</td></tr> <tr><td><strong>Host</strong> *</td> <td>请求资源所在服务器，<strong>唯一必须被包含在请求首部的字段</strong></td></tr> <tr><td><strong>If-Match</strong> *</td> <td>比较实体标记（ETag），如果服务端有对应的 ETag 则处理请求</td></tr> <tr><td><strong>If-Modified-Since</strong> *</td> <td>从某个时期开始，如果有更新，服务端就接受请求，否则 304</td></tr> <tr><td>If-None-Match *</td> <td>比较实体标记（与 If-Match 相反），如果服务端没有对应的 ETag 则处理请求</td></tr> <tr><td>If-Range *</td> <td>资源未更新时发送实体 Byte 的范围请求</td></tr> <tr><td>If-Unmodified-Since *</td> <td>比较资源的更新时间（与 If-Modified-Since 相反）</td></tr> <tr><td>Max-Forwards</td> <td>最大传输逐跳数</td></tr> <tr><td>Proxy-Authorization</td> <td>代理服务器要求客户端的认证信息</td></tr> <tr><td>Range *</td> <td>实体的字节范围请求</td></tr> <tr><td><strong>Referer</strong> *</td> <td>对请求中 URI 的原始获取方</td></tr> <tr><td>TE</td> <td>传输编码的优先级</td></tr> <tr><td><strong>User-Agent</strong> *</td> <td>HTTP 客户端程序的信息</td></tr></tbody></table> <h3 id="_4-5-响应首部-response-header-fields"><a href="#_4-5-响应首部-response-header-fields" class="header-anchor">#</a> 4.5 响应首部（Response Header Fields）</h3> <table><thead><tr><th>首部字段名</th> <th>说明</th></tr></thead> <tbody><tr><td>Accept-Ranges *</td> <td>是否接受字节范围请求</td></tr> <tr><td>Age</td> <td>推算资源创建经过时间</td></tr> <tr><td><strong>ETag</strong> *</td> <td>服务器为每一个资源分配的唯一标识</td></tr> <tr><td><strong>Location</strong> *</td> <td>令客户端重定向至指定 URI，重定向</td></tr> <tr><td>Proxy-Authenticate</td> <td>代理服务器对客户端的认证信息</td></tr> <tr><td>Retry-After *</td> <td>对再次发起请求的时机要求</td></tr> <tr><td>Server *</td> <td>HTTP 服务器的信息：nginx/1.16.1</td></tr> <tr><td>Vary</td> <td>对持相同自然语言的请求返回缓存</td></tr> <tr><td>WWW-Authenticate</td> <td>服务器对客户端的认证信息</td></tr></tbody></table> <h3 id="_4-6-实体首部-entity-header-fields"><a href="#_4-6-实体首部-entity-header-fields" class="header-anchor">#</a> 4.6 实体首部（Entity Header Fields）</h3> <table><thead><tr><th>首部字段名</th> <th>说明</th></tr></thead> <tbody><tr><td>Allow *</td> <td>资源可支持的 HTTP 方法：GET, HEAD</td></tr> <tr><td>Content-Encoding *</td> <td>实体主体适用的编码方式</td></tr> <tr><td>Content-Language *</td> <td>实体主体的自然语言</td></tr> <tr><td>Content-Length *</td> <td>实体主体的大小（单位：字节）</td></tr> <tr><td>Content-Location *</td> <td>替代对应资源的 URI</td></tr> <tr><td>Content-MD5</td> <td>实体主体的报文摘要</td></tr> <tr><td>Content-Range *</td> <td>实体主体的位置范围</td></tr> <tr><td>Content-Type *</td> <td>实体主体的媒体类型</td></tr> <tr><td>Expires *</td> <td>实体主体过期的日期时间</td></tr> <tr><td>Last-Modified *</td> <td>资源的最后修改日期时间</td></tr></tbody></table> <h3 id="_4-7-其他"><a href="#_4-7-其他" class="header-anchor">#</a> 4.7 其他</h3> <p>Cookie、Set-Cookie</p> <h2 id="五、http-方法"><a href="#五、http-方法" class="header-anchor">#</a> 五、HTTP 方法</h2> <table><thead><tr><th>方法</th> <th>释义</th></tr></thead> <tbody><tr><td>GET</td> <td>请求资源就返回资源，请求 CGI 则返回接口处理结果</td></tr> <tr><td>HEAD</td> <td>同 GET，但是只获得报文首部，不返回报文主体部分。用于确认 URI 的有效性及资源更新的日期时间等</td></tr> <tr><td>POST</td> <td>向服务器传输实体主体</td></tr> <tr><td>PUT</td> <td>向服务器写入文档内容，由服务器返回文档的地址，若已存在该文档，内容会覆盖（PUT 方法自身不带验证机制，存在安全性问题，一般通过登录来解决）</td></tr> <tr><td>DELETE</td> <td>删除 URL 指定的资源，因为服务器有撤销该请求的权限，所以不一定会删除</td></tr> <tr><td>OPTIONS</td> <td>询问针对请求 URI，服务器所支持的方法，返回 Allow：GET,POST,HEAD,OPTIONS</td></tr> <tr><td>TRACE</td> <td>追踪整个请求的过程，可能引发 XST（Cross-Site Tracing，跨站追踪）攻击</td></tr> <tr><td>CONNECT</td> <td>要求用隧道协议连接代理，使用 SSL（Secure Sockets Layer，安全套接层）和 TLS（Transport Layer Security，传输层安全）协议把通信内容加密后经网络隧道传输</td></tr></tbody></table> <p>``</p> <h2 id="六、状态码"><a href="#六、状态码" class="header-anchor">#</a> 六、状态码</h2> <h3 id="_2xx-成功"><a href="#_2xx-成功" class="header-anchor">#</a> 2xx 成功</h3> <table><thead><tr><th>状态码</th> <th>英文名称</th> <th>描述</th></tr></thead> <tbody><tr><td>200</td> <td>OK</td> <td>请求处理成功</td></tr> <tr><td>202</td> <td>Accepted</td> <td>已接受请求，但不执行任何动作</td></tr> <tr><td>204</td> <td>No Content</td> <td>请求处理成功，但不返回内容</td></tr> <tr><td>206</td> <td>Partial Content</td> <td>成功执行了一个部分资源的 GET 请求，对应 range 请求</td></tr></tbody></table> <h3 id="_3xx-重定向"><a href="#_3xx-重定向" class="header-anchor">#</a> 3xx 重定向</h3> <table><thead><tr><th>状态码</th> <th>英文名称</th> <th>描述</th></tr></thead> <tbody><tr><td>301</td> <td>Moved Permanently</td> <td>资源 URI 永久修改，通过 Location 访问新 URI，规定不能修改 HTTP 方法，但实际会将 POST 变为 GET</td></tr> <tr><td>302</td> <td>Found</td> <td>资源 URI 临时修改，将来的请求仍用旧的 URI，规定是不能修改 HTTP 方法，但实际会将 POST 变为 GET</td></tr> <tr><td>303</td> <td>See Other</td> <td>使用 GET 请求重新请求 Location 中的新地址</td></tr> <tr><td>304</td> <td>Not Modified</td> <td>客户端发出带条件的请求，但资源未被修改（不属于重定向）</td></tr> <tr><td>305</td> <td>Use Proxy</td> <td>重新访问返回的 Location 中的代理地址</td></tr> <tr><td>307</td> <td>Temporary Redirect</td> <td>同 302 类似，但二次请求不会从 POST 变成 GET</td></tr></tbody></table> <h3 id="_4xx-客户端错误"><a href="#_4xx-客户端错误" class="header-anchor">#</a> 4xx 客户端错误</h3> <table><thead><tr><th>状态码</th> <th>英文名称</th> <th>描述</th></tr></thead> <tbody><tr><td>400</td> <td>Bad Request</td> <td>客户端发出的请求报文有语法错误</td></tr> <tr><td>401</td> <td>Unauthorized</td> <td>首次请求，表示当前请求需要用户验证；二次请求，表示认证失败</td></tr> <tr><td>403</td> <td>Forbidden</td> <td>表示请求被服务器拒绝</td></tr> <tr><td>404</td> <td>Not Found</td> <td>请求失败，服务器没找到请求的资源，常被用于拒绝请求的场景</td></tr> <tr><td>405</td> <td>Method Not Allowed</td> <td>表示请求的方法不被支持用于请求相应的资源</td></tr></tbody></table> <h3 id="_5xx-服务端错误"><a href="#_5xx-服务端错误" class="header-anchor">#</a> 5xx 服务端错误</h3> <table><thead><tr><th>状态码</th> <th>英文名称</th> <th>描述</th></tr></thead> <tbody><tr><td>500</td> <td>Internal Server Error</td> <td>服务器执行请求报错</td></tr> <tr><td>501</td> <td>Not Implemented</td> <td>服务器不支持该请求的方法</td></tr> <tr><td>503</td> <td>Service Unavailable</td> <td>服务器宕机或停机维护</td></tr></tbody></table> <h2 id="七、无连接性"><a href="#七、无连接性" class="header-anchor">#</a> 七、无连接性</h2> <blockquote><p>HTTP 协议的初始版本中，每进行一次 HTTP 通信就要断开一次 TCP 连接。</p> <p>问题：随着请求资源的丰富，每次的请求都会造成无谓的 TCP 连接建立和断开，增加了通信量的开销。</p> <p>引申出：**持久连接 HTTP keep-alive ** <strong>管线化（pipelining）</strong></p></blockquote> <h3 id="_7-1-keep-alive"><a href="#_7-1-keep-alive" class="header-anchor">#</a> 7.1 keep-alive</h3> <blockquote><p>减少了 TCP 连接的重复建立和断开所造成的额外开销，减轻了服务器端的负载。另外，减少开销的那部分时间，使 HTTP 请求和响应能够更早地结束，这样 Web 页面的显示速度也就相应提高了。</p></blockquote> <img src="https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/20200708010709.png" alt="keep-alive" style="zoom:33%;"> <h3 id="_7-2-管线化"><a href="#_7-2-管线化" class="header-anchor">#</a> 7.2 管线化</h3> <blockquote><p>不用等待上一个请求的响应亦可直接发送下一个请求</p></blockquote> <img src="https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/20200708010928.png" style="zoom:50%;"> <p>​</p> <h2 id="八、无状态性"><a href="#八、无状态性" class="header-anchor">#</a> 八、无状态性</h2> <blockquote><p>为了更快地处理大量事务，确保协议的可伸缩性，HTTP 被设计为不保存状态，即无状态（stateless）协议。HTTP 协议自身不对请求和响应之间的通信状态进行保存。也就是说在 HTTP 这个级别，协议对于发送过的请求或响应都不做持久化处理。</p> <p>问题：登录状态无法保持</p> <p>引申出：<strong>状态管理机制 cookie</strong></p></blockquote> <h3 id="_8-1-cookie"><a href="#_8-1-cookie" class="header-anchor">#</a> 8.1 Cookie</h3> <blockquote><p>Cookie 技术通过在请求和响应报文中写入 Cookie 信息来控制客户端的状态</p> <ul><li>客户端通过<strong>set-cookie</strong>首部字段获取身份状态标识，存在本地</li> <li>客户端下次请求会自动带上存在本地的<strong>cookie</strong></li></ul></blockquote> <img src="https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/image-20200630145619704.png" style="zoom:67%;"> <ol><li><p>请求报文（没有 Cookie 信息的状态）</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code><span class="token request-line"><span class="token property">GET</span> /reader/ HTTP/1.1</span>
<span class="token header-name keyword">Host:</span> hackr.jp
*首部字段内没有Cookie的相关信息
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>响应报文（服务器端生成 Cookie 信息）</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code><span class="token response-status">HTTP/1.1 <span class="token property">200 OK</span></span>
<span class="token header-name keyword">Date:</span> Thu, 12 Jul 2012 07:12:20 GMT
<span class="token header-name keyword">Server:</span> Apache
＜Set-Cookie: sid=1342077140226724; path=/; expires=Wed, 10-Oct-12 07:12:20 GMT＞
<span class="token header-name keyword">Content-Type:</span> text/plain; charset=UTF-8
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>请求报文（自动发送保存着的 Cookie 信息）</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code><span class="token request-line"><span class="token property">GET</span> /image/ HTTP/1.1</span>
<span class="token header-name keyword">Host:</span> hackr.jp
<span class="token header-name keyword">Cookie:</span> sid=1342077140226724
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol> <h3 id="_8-2-session"><a href="#_8-2-session" class="header-anchor">#</a> 8.2 Session</h3> <ol><li>存储 SessionID 的方法：
<ol><li>cookie</li> <li>URL 重写</li> <li>隐藏表单</li></ol></li> <li>seesion 有效期
<ol><li>超时</li> <li>注销</li></ol></li></ol> <img src="https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/image-20200630145726148.png" style="zoom:50%;"> <h2 id="九、缓存"><a href="#九、缓存" class="header-anchor">#</a> 九、缓存</h2> <p>Cache-Control</p> <ol><li>no-store 所有内容都不缓存</li> <li>no-cache 缓存，但是在缓存前会向服务端确认缓存资源是否是最新</li> <li>max-age=x 请求缓存后的 x 秒内不再发起请求</li> <li>s-maxge=x CDN 请求源站缓存后的 x 秒内不再发起请求</li> <li>public 客户端和 CDN 都可缓存</li> <li>private 只有客户端可缓存</li></ol> <p>Expires 过期时间</p> <p>Last-Modified 响应头 服务端资源最新修改时间 精确到秒</p> <p>If-Modified-Since 请求头 客户端资源最新修改时间（上次服务端提供的 Last-Modified）</p> <p>Etag 响应头 服务端资源标识</p> <p>If-None-Match 请求头 客户端缓存资源标识（上次服务端提供的 Etag）</p> <h3 id="md5-hash-缓存"><a href="#md5-hash-缓存" class="header-anchor">#</a> MD5/hash 缓存</h3> <p>file_341j991nk91.js --&gt; file_aii8353km39.js</p> <h3 id="cdn-缓存"><a href="#cdn-缓存" class="header-anchor">#</a> CDN 缓存</h3> <h2 id="十、内容协商"><a href="#十、内容协商" class="header-anchor">#</a> 十、内容协商</h2> <p>客户端：</p> <ol><li>Accept：告知服务端 客户端此次接受的媒体类型</li> <li>Accept-Language：告知服务端 客户端此次接受的语言</li> <li>Accept-Charset：告知服务端 客户端此次接受的字符集</li> <li>Accept-Encoding：告知服务器 客户端此次接受的编码格式</li></ol> <p>服务端：</p> <ol><li><p>Content-Type</p></li> <li><p>Content-Language</p></li> <li><p>Content-Type</p></li> <li><p>Content-Encoding</p></li></ol> <h2 id="十一、断点续传和多线程下载"><a href="#十一、断点续传和多线程下载" class="header-anchor">#</a> 十一、断点续传和多线程下载</h2> <p>请求头</p> <p>​ Range：bytes=12400-</p> <p>响应头 206</p> <p>​ Content-Range：bytes 12400-/24000</p> <h2 id="十二、https"><a href="#十二、https" class="header-anchor">#</a> 十二、HTTPS</h2> <p>HTTP+TLS</p> <p>优点：</p> <blockquote><ol><li>内容加密</li> <li>身份认证</li> <li>数据完整</li></ol></blockquote> <p>缺点：</p> <blockquote><ol><li>证书费用以及更新维护</li> <li>HTTPS 降低用户访问速度</li> <li>消耗 CPU 资源，需要增加机器</li></ol></blockquote> <p>加密方式：</p> <ol><li><p>对称加密 AES</p> <ol><li>客户端 a 发送密钥（key） 给 服务端 b</li> <li>服务端 b 使用密钥（key）对文本加密后 发送给 客户端 a</li> <li>客户端 a 使用密钥（key）进行解密</li></ol> <p>问题：step1 的时候 密钥（key）就被中间人拦截</p></li> <li><p>非对称加密 RSA</p> <ol><li>客户端 a 服务端 b 均拥有各自公钥和私钥</li> <li>客户端 a 发送 a 的公钥（publicA） 给服务端 b</li> <li>服务端 b 使用 a 的公钥（publicA）对文本加密后 发送给 客户端 a</li> <li>客户端 a 使用 a 的私钥（privateA）对文本解密</li></ol> <p>问题：在 setp2 的时候 a 的公钥（publicA）被 中间人拦截，中间人将其自己的公钥（publicC）发送给 b，b 使用中间人的公钥加密后发送给 a 的途中再次被中间人拦截并使用（privateC）进行解密</p></li> <li><p>CA</p> <ol><li>服务端 b 的公钥发送给 CA，由 CA 的私钥加密得到 CA(publicB)</li> <li>客户端 a 向服务端 b 发起请求</li> <li>服务端 b 将 CA(publicB) 发送给 a</li> <li>客户端 a 将 CA(publicB) 用 CA 的公钥解密得到 publicB， 并用 publicB 对 a 的 AES 密钥（key）进行加密，得到 publicB(key)发送给 服务端 b</li> <li>服务端 b 使用 b 的私钥解密 publicB(key) 得到 key，并用 key 对文本加密发送给客户端 a，接下来就开始进行一系列对称加密流程</li></ol></li></ol> <img src="https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/image-20200630174856609.png" style="zoom:50%;"> <h2 id="十三、http1-1"><a href="#十三、http1-1" class="header-anchor">#</a> 十三、HTTP1.1</h2> <ol><li><p>TCP 连接数量限制</p> <ol><li>对于同一个域名，浏览器最多只能同时创建 6~8 个 TCP 连接 (不同浏览器不一样)。为了解决数量限制，出现了 域名分片 技术，其实就是资源分域，将资源放在不同域名下 (比如二级子域名下)，这样就可以针对不同域名创建连接并请求，以一种讨巧的方式突破限制，但是滥用此技术也会造成很多问题，比如每个 TCP 连接本身需要经过 DNS 查询、三步握手、慢启动等，还占用额外的 CPU 和内存，对于服务器来说过多连接也容易造成网络拥挤、交通阻塞等，对于移动端来说问题更明显</li> <li>为了尽可能减少请求数，需要做合并文件、雪碧图、资源内联等优化工作，但是这无疑造成了单个请求内容变大延迟变高的问题，<code>且内嵌的资源不能有效地使用缓存机制</code></li></ol></li> <li><p>队头阻塞 (Head Of Line Blocking)</p> <p>每个 TCP 连接同时只能处理一个请求 - 响应，浏览器按 FIFO 原则处理请求，如果上一个响应没返回，后续请求 - 响应都会受阻。为了解决此问题，出现了 管线化 - pipelining 技术，但是管线化存在诸多问题，比如第一个响应慢还是会阻塞后续响应、服务器为了按序返回相应需要缓存多个响应占用更多资源、浏览器中途断连重试服务器可能得重新处理多个请求、还有必须客户端 - 代理 - 服务器都支持管线化</p></li> <li><p>请求只能由客户端发起，不能接受除响应以外的指令</p></li> <li><p>请求/响应头部不经压缩就发送，每次互相发送相同的头部造成浪费</p> <p>Header 内容多，而且每次请求 Header 不会变化太多，没有相应的压缩传输优化方案</p></li> <li><p>非强制压缩发送</p></li> <li><p>明文传输不安全</p></li></ol> <h2 id="十四、http2-0"><a href="#十四、http2-0" class="header-anchor">#</a> 十四、HTTP2.0</h2> <blockquote><p>参考：<a href="https://juejin.im/post/5b88a4f56fb9a01a0b31a67e" target="_blank" rel="noopener noreferrer">HTTP2 详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p><strong>优势：</strong></p> <ol><li><p>二进制分帧层 (Binary Framing Layer)</p> <img src="https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/20200719144756.png" style="zoom:50%;"></li> <li><p>多路复用 (MultiPlexing)</p> <ol><li>在一个 TCP 连接上，我们可以向对方不断发送帧，每帧的 stream identifier 的标明这一帧属于哪个流，然后在对方接收时，根据 stream identifier 拼接每个流的所有帧组成一整块数据。把 HTTP/1.1 每个请求都当作一个流，那么多个请求变成多个流，请求响应数据分成多个帧，不同流中的帧交错地发送给对方，这就是 HTTP/2 中的多路复用。</li> <li>流的概念实现了单连接上多请求 - 响应并行，解决了线头阻塞的问题，减少了 TCP 连接数量和 TCP 连接慢启动造成的问题，所以 http2 对于同一域名只需要创建一个连接，而不是像 http/1.1 那样创建 6~8 个连接</li> <li>针对 http/1 的一些优化如：合并文件、内联资源、雪碧图、域名分片等，对于 HTTP/2 来说是不必要的，使用 h2 尽可能将资源细粒化，文件分解地尽可能散，不用担心请求数多</li></ol></li> <li><p>服务端推送 (Server Push)</p> <p>浏览器发送一个请求，服务器主动向浏览器推送与这个请求相关的资源，这样浏览器就不用发起后续请求。</p> <p>Server-Push 主要是针对资源内联做出的优化，相较于 http/1.1 资源内联的优势:</p> <ul><li>客户端可以缓存推送的资源</li> <li>客户端可以拒收推送过来的资源</li> <li>推送资源可以由不同页面共享</li> <li>服务器可以按照优先级推送资源</li></ul></li> <li><p>Header 压缩 (HPACK)</p> <p>使用 HPACK 算法来压缩首部内容</p></li> <li><p>请求优先级设置</p> <p>HTTP/2 里的每个 stream 都可以设置依赖 (Dependency) 和权重，可以按依赖树分配优先级，解决了关键请求被阻塞的问题</p></li> <li><p>应用层的重置连接</p> <p>对于 HTTP/1 来说，是通过设置 tcp segment 里的 reset flag 来通知对端关闭连接的。这种方式会直接断开连接，下次再发请求就必须重新建立连接。HTTP/2 引入 RST_STREAM 类型的 frame，可以在不断开连接的前提下取消某个 request 的 stream，表现更好</p></li> <li><p>流量控制</p> <p>每个 http2 流都拥有自己的公示的流量窗口，它可以限制另一端发送数据。对于每个流来说，两端都必须告诉对方自己还有足够的空间来处理新的数据，而在该窗口被扩大前，另一端只被允许发送这么多数据</p></li></ol> <h2 id="十五、http3-0"><a href="#十五、http3-0" class="header-anchor">#</a> 十五、HTTP3.0</h2> <ol><li>QUIC 协议</li></ol> <h2 id="十六、websocket"><a href="#十六、websocket" class="header-anchor">#</a> 十六、WebSocket</h2> <blockquote><p>HTTP 协议的补充，与 HTTP 有交集</p> <p>参考：<a href="https://zhuanlan.zhihu.com/p/149680021" target="_blank" rel="noopener noreferrer">理解 websocket 的原理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <div class="language-css line-numbers-mode"><pre class="language-css"><code>// 请求 协议升级
<span class="token property">Upgrade</span><span class="token punctuation">:</span> websocket
<span class="token property">Connection</span><span class="token punctuation">:</span> upgrade
<span class="token property">Sec-WebSocket-Key</span><span class="token punctuation">:</span>  //
<span class="token property">Sec-WebSocket-Protocol</span><span class="token punctuation">:</span>   // 区分统一url下不同服务所用的协议
<span class="token property">Sec-WebSocket-Version</span><span class="token punctuation">:</span>   // 协议版本

// 响应
HTTP/1.1 101 Switching Protocols
<span class="token property">Upgrade</span><span class="token punctuation">:</span> websocket
<span class="token property">Connection</span><span class="token punctuation">:</span> upgrade
<span class="token property">Sec-WebSocket-Accept</span><span class="token punctuation">:</span>
<span class="token property">Sec-WebSocket-Protocol</span><span class="token punctuation">:</span>  // 使用的协议
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><img src="https://resource-save-01.oss-cn-chengdu.aliyuncs.com/img/image-20200630183559298.png" style="zoom:50%;"> <h2 id="十七、安全"><a href="#十七、安全" class="header-anchor">#</a> 十七、安全</h2> <ol><li>Authentication （验证）：用来确认某用户、服务、应用身份的攻击手段</li> <li>Authorization（授权）：用来决定某用户、服务、应用是否具有执行请求权限的攻击手段</li> <li>Client-Side Attacks（客户端攻击）：用来扰乱或者探测 web 站点用户的攻击手段</li> <li>Command Execution（命令执行）：在 web 站点执行远程命令的攻击手段</li> <li>Information Disclosure（信息暴露）：用来获取 web 站点具体系统信息的攻击手段</li> <li>Logical Attacks（逻辑性攻击）：用来扰乱或是探测 web 应用逻辑流程的攻击手段</li></ol> <p>登录验证：</p> <ol><li>暴力破解
<ol><li>验证码</li> <li>修改 cookie，达到某个逻辑值则不允许登录</li> <li>双因子认证</li></ol></li></ol> <h3 id="xss"><a href="#xss" class="header-anchor">#</a> XSS</h3> <blockquote><p>Cross-Site Scripting（跨站脚本攻击），攻击者通过在目标网站上注入恶意脚本，使之在用户的浏览器上运行。利用这些恶意脚本，攻击者可获取用户的敏感信息如 Cookie、SessionID 等，进而危害数据安全。</p> <p>参考：<a href="https://tech.meituan.com/2018/09/27/fe-security.html" target="_blank" rel="noopener noreferrer">如何防止 XSS 攻击？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <ol><li><p>存储型</p> <ol><li>攻击者将恶意代码提交到目标网站的数据库中。</li> <li>用户打开目标网站时，网站服务端将恶意代码从数据库取出，拼接在 HTML 中返回给浏览器。</li> <li>用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行。</li> <li>恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作。
这种攻击常见于带有用户保存数据的网站功能，如论坛发帖、商品评论、用户私信等</li></ol></li> <li><p>反射型</p> <ol><li>攻击者构造出特殊的 URL，其中包含恶意代码。</li> <li>用户打开带有恶意代码的 URL 时，网站服务端将恶意代码从 URL 中取出，拼接在 HTML 中返回给浏览器。</li> <li>用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行。</li> <li>恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作
反射型 XSS 跟存储型 XSS 的区别是：存储型 XSS 的恶意代码存在数据库里，反射型 XSS 的恶意代码存在 URL 里。
反射型 XSS 漏洞常见于通过 URL 传递参数的功能，如网站搜索、跳转等。
由于需要用户主动打开恶意的 URL 才能生效，攻击者往往会结合多种手段诱导用户点击。
POST 的内容也可以触发反射型 XSS，只不过其触发条件比较苛刻（需要构造表单提交页面，并引导用户点击），所以非常少见</li></ol></li> <li><p>DOM 型</p> <ol><li>攻击者构造出特殊的 URL，其中包含恶意代码。</li> <li>用户打开带有恶意代码的 URL。</li> <li>用户浏览器接收到响应后解析执行，前端 JavaScript 取出 URL 中的恶意代码并执行。</li> <li>恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作。
DOM 型 XSS 跟前两种 XSS 的区别：DOM 型 XSS 攻击中，取出和执行恶意代码由浏览器端完成，属于前端 JavaScript 自身的安全漏洞，而其他两种 XSS 都属于服务端的安全漏洞。</li></ol></li></ol> <p><strong>预防：</strong></p> <ol><li><p>输入过滤</p></li> <li><p>纯前端渲染--针对存储型和反射型 XSS</p></li> <li><p>转义 HTML--针对存储型和反射型 XSS</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- HTML 标签内文字内容 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>&lt;%= Encode.forHtml(UNTRUSTED) %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- HTML 标签属性值 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&lt;%= Encode.forHtml(UNTRUSTED) %&gt;<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- CSS 属性值 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">width</span><span class="token punctuation">:</span>&lt;%= Encode.<span class="token function">forCssString</span><span class="token punctuation">(</span>UNTRUSTED<span class="token punctuation">)</span> %&gt;</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- CSS URL --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">background</span><span class="token punctuation">:</span>&lt;%= Encode.<span class="token function">forCssUrl</span><span class="token punctuation">(</span>UNTRUSTED<span class="token punctuation">)</span> %&gt;</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- JavaScript 内联代码块 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token string">'&lt;%= Encode.forJavaScript(UNTRUSTED) %&gt;'</span><span class="token punctuation">;</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- JavaScript 内联代码块内嵌 JSON --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      <span class="token keyword">var</span> __INITIAL_STATE__ <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'&lt;%= Encoder.forJavaScript(data.to_json) %&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- HTML 标签内联监听器 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>alert(<span class="token punctuation">'</span>&lt;%= Encode.forJavaScript(UNTRUSTED) %&gt;<span class="token punctuation">'</span>);<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      click me
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- URL 参数 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/search?value=&lt;%= Encode.forUriComponent(UNTRUSTED) %&gt;&amp;order=1#top<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- URL 路径 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/page/&lt;%= Encode.forUriComponent(UNTRUSTED) %&gt;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--
  URL.
  注意：要根据项目情况进行过滤，禁止掉 &quot;javascript:&quot; 链接、非法 scheme 等
--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span>
          <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>&lt;%=
  urlValidator.isValid(UNTRUSTED) ?
    Encode.forHtml(UNTRUSTED) :
    <span class="token punctuation">&quot;</span>/404<span class="token punctuation">&quot;</span>
%&gt;<span class="token punctuation">'</span></span>
        <span class="token punctuation">&gt;</span></span>
          link
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span>
      <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span>
    <span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div></li> <li><p>杜绝不可信数据被执行--针对存储型和反射型 XSS</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 内联事件监听器中包含恶意代码 --&gt;</span>
![](https://awps-assets.meituan.net/mit-x/blog-images-bundle-2018b/3e724ce0.data:image/png,)

<span class="token comment">&lt;!-- 链接内包含恶意代码 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UNTRUSTED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// setTimeout()/setInterval() 中调用恶意代码</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token string">'UNTRUSTED'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token string">'UNTRUSTED'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// location 调用恶意代码</span>
  location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">'UNTRUSTED'</span><span class="token punctuation">;</span>

  <span class="token comment">// eval() 中调用恶意代码</span>
  <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">'UNTRUSTED'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li></ol> <h3 id="csrf"><a href="#csrf" class="header-anchor">#</a> CSRF</h3> <blockquote><p>CSRF（Cross-site request forgery）跨站请求伪造：攻击者诱导受害者进入第三方网站，在第三方网站中，向被攻击网站发送跨站请求。利用受害者在被攻击网站已经获取的注册凭证，绕过后台的用户验证，达到冒充用户对被攻击的网站执行某项操作的目的</p> <p>参考：<a href="https://tech.meituan.com/2018/10/11/fe-security-csrf.html" target="_blank" rel="noopener noreferrer">如何防止 CSRF 攻击？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>预防：</p> <ol><li>阻止不明外域的访问</li></ol> <ul><li>同源检测：Origin Header、Referer Header</li> <li>Samesite Cookie</li></ul> <ol start="2"><li>提交时要求附加本域才能获取的信息</li></ol> <ul><li>CSRF Token</li> <li>双重 Cookie 验证</li></ul> <h3 id="sql-注入"><a href="#sql-注入" class="header-anchor">#</a> SQL 注入</h3> <p>通过提交 sql 语法导致数据泄漏</p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/lvhaohua/blog-hugo-vuepress/edit/master/docs/01.前端/04.其他/03.网络协议/01.一次搞懂网络协议.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/blog/tags/?tag=http" title="标签">#http</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/03/21, 19:29:22</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/blog/pages/08dc4b/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">浏览器的事件机制</div></a> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/pages/08dc4b/" class="prev">浏览器的事件机制</a></span> <!----></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/blog/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/blog/pages/d42f97/"><div>前端实现文件下载压缩</div></a> <span>11-02</span></dt></dl><dl><dd>02</dd> <dt><a href="/blog/pages/c3f272/"><div>前端监控梳理</div></a> <span>11-02</span></dt></dl><dl><dd>03</dd> <dt><a href="/blog/pages/85fae3/"><div>打家劫舍</div></a> <span>11-02</span></dt></dl> <dl><dd></dd> <dt><a href="/blog/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:haohua.lv@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/lvhaohua" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div>  Copyright © 2022. All Rights Reserved. </div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/blog/assets/js/app.9aa4386c.js" defer></script><script src="/blog/assets/js/2.a9d98552.js" defer></script><script src="/blog/assets/js/3.1dbb2db0.js" defer></script><script src="/blog/assets/js/34.3b1bf57e.js" defer></script>
  </body>
</html>
